/* ============================================
   Sistema EBI - Santa María La Blanca
   Estilo old/styles.css con colores colegio y etapas
   Colegio: #293345 #fafaf7 #970036
   Etapas: infantil, escuelita, primaria, secundaria, fp
   ============================================ */
:root {
  --colegio-dark: #293345;
  --colegio-cream: #fafaf7;
  --colegio-red: #970036;
  /* Acento en secciones de fondo claro (iconos, bordes, enlaces): azul corporativo */
  --accent-light: #293345;
  --etapa-infantil: #E3C34A;
  --etapa-infantil-bg: #F7E8B8;
  --etapa-escuelita: #5FAFA8;
  --etapa-escuelita-bg: #C8E4E2;
  --etapa-primaria: #6E8FAF;
  --etapa-primaria-bg: #C7D6E2;
  --etapa-secundaria: #E17A55;
  --etapa-secundaria-bg: #F3C1AF;
  --etapa-fp: #8C7CB8;
  --etapa-fp-bg: #D6CCE7;
}

*,
*::before,
*::after {
  box-sizing: border-box;
}

html {
  scroll-padding-top: 80px;
}

html,
body {
  margin: 0;
  padding: 0;
}

html {
  overflow-x: hidden;
}

body {
  font-family: "Inter", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
    sans-serif;
  color: #1a2030;
  background: #293345;
  line-height: 1.6;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* Mejoras de accesibilidad */
:focus-visible {
  outline: 3px solid #970036;
  outline-offset: 2px;
  border-radius: 4px;
}

.skip-link {
  position: absolute;
  top: -40px;
  left: 0;
  background: #293345;
  color: #fafaf7;
  padding: 8px 16px;
  text-decoration: none;
  z-index: 10000;
  border-radius: 0 0 4px 0;
}

.skip-link:focus {
  top: 0;
}

img {
  max-width: 100%;
  display: block;
}

a {
  color: inherit;
  text-decoration: none;
}

ul {
  margin: 0;
  padding-left: 1.2rem;
}

/* Layout generales */

.section {
  padding: 100px 24px 80px;
  background: var(--colegio-dark);
  color: #e8e8e4;
  scroll-margin-top: 80px;
  min-height: auto;
}

.section--light {
  padding: 100px 24px 80px;
  background: radial-gradient(circle at top left, #fafaf7 0, #e8e8e4 40%, #fafaf7 100%);
  color: #151b26;
  min-height: auto;
}

/* Criterios EBI al inicio de cada página de etapa: Perfil de aprendizaje y Relaciones significativas */
.criterios-etapa {
  padding: 64px 24px 72px;
  background: var(--colegio-dark);
  color: #e8e8e4;
  scroll-margin-top: 80px;
}

.criterios-etapa .section__header {
  margin-bottom: 32px;
}

.criterios-etapa .section__header h2 {
  font-size: 1.35rem;
}

.criterios-etapa__grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 24px;
  max-width: 900px;
  margin: 0 auto;
}

.criterio-block {
  background: rgba(250, 250, 247, 0.08);
  border: 1px solid rgba(250, 250, 247, 0.18);
  border-radius: 20px;
  padding: 28px 26px;
  display: flex;
  flex-direction: column;
  gap: 12px;
  transition: border-color 0.2s ease, box-shadow 0.2s ease;
}

.criterio-block:hover {
  border-color: rgba(250, 250, 247, 0.28);
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);
}

.criterio-block__icon {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 48px;
  height: 48px;
  border-radius: 14px;
  font-size: 1.4rem;
  color: #fafaf7;
  flex-shrink: 0;
}

.criterio-block--perfil .criterio-block__icon {
  background: rgba(151, 0, 54, 0.4);
}

.criterio-block--relaciones .criterio-block__icon {
  background: rgba(56, 189, 248, 0.35);
}

.criterio-block__title {
  margin: 0;
  font-size: 1.1rem;
  font-weight: 700;
  color: #fafaf7;
  letter-spacing: 0.02em;
}

.criterio-block__text {
  margin: 0;
  font-size: 1rem;
  line-height: 1.55;
  color: rgba(250, 250, 247, 0.9);
}

@media (max-width: 640px) {
  .criterios-etapa__grid {
    grid-template-columns: 1fr;
  }
}

.section__header {
  max-width: 1000px;
  margin: 0 auto 48px;
  text-align: center;
}

/* Menos espacio vertical en Etapas y Horizonte de expectativas */
#etapas.section,
#horizonte.section {
  padding-top: 56px;
  padding-bottom: 48px;
}

#etapas .section__header,
#horizonte .section__header {
  margin-bottom: 24px;
}

#horizonte.section {
  padding-top: 32px;
}

#etapas .stage-cards-list {
  margin-top: 0;
}

.section__header h2 {
  margin: 0 0 16px;
  font-size: clamp(1.5rem, 4vw, 2rem);
  letter-spacing: -0.03em;
  line-height: 1.2;
  font-weight: 700;
  color: #fafaf7;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 12px;
  flex-wrap: wrap;
}

.section--light .section__header h2 {
  color: #151b26;
}

.section--light .section__header h2 i {
  color: var(--accent-light);
}

.section__header h2 i {
  color: #970036;
  font-size: 1.8rem;
  flex-shrink: 0;
}

.section__header p {
  margin: 0;
  font-size: clamp(0.9rem, 2vw, 1.05rem);
  color: inherit;
  opacity: 0.95;
  line-height: 1.6;
  max-width: 800px;
  margin-left: auto;
  margin-right: auto;
}

.grid {
  display: grid;
  gap: 24px;
  max-width: 1200px;
  margin: 0 auto;
}

/* Grids específicos para mejor control responsive */
.grid--2 {
  grid-template-columns: repeat(2, 1fr);
  gap: 24px;
}

.grid--3 {
  grid-template-columns: repeat(3, 1fr);
  gap: 24px;
}

.grid--4 {
  grid-template-columns: repeat(4, 1fr);
  gap: 20px;
}

/* Grid 2x2 con tercera fila centrada */
.grid--2-3 {
  grid-template-columns: repeat(2, 1fr);
  gap: 24px;
}

.grid--2-3 > *:nth-child(3) {
  grid-column: span 2;
  max-width: 600px;
  margin: 0 auto;
}

/* Grid 3x2 específico para 6 elementos */
.grid--3x2 {
  grid-template-columns: repeat(3, 1fr);
  gap: 24px;
}

/* Lista de etapas 1x6 (Escuelita, Infantil…) en una sola línea, sin iconos */
.stage-cards-list {
  display: grid;
  grid-template-columns: repeat(6, 1fr);
  gap: 16px;
  max-width: 1200px;
  margin: 0 auto;
}

@media (max-width: 900px) {
  .stage-cards-list {
    grid-template-columns: repeat(6, minmax(160px, 1fr));
    overflow-x: auto;
    padding-bottom: 8px;
    -webkit-overflow-scrolling: touch;
  }
}

.stage-cards-list .card--usecase h3 {
  display: block;
}

.stage-cards-list .card--usecase:nth-child(1) { border-top-color: #5FAFA8; }
.stage-cards-list .card--usecase:nth-child(1):hover {
  border-color: #5FAFA8;
  background: radial-gradient(circle at top left, rgba(95, 175, 168, 0.2), #C8E4E2);
}
.stage-cards-list .card--usecase:nth-child(1) .stage-card-link { color: #5FAFA8; }

.stage-cards-list .card--usecase:nth-child(2) { border-top-color: #E3C34A; }
.stage-cards-list .card--usecase:nth-child(2):hover {
  border-color: #E3C34A;
  background: radial-gradient(circle at top left, rgba(227, 195, 74, 0.2), #F7E8B8);
}
.stage-cards-list .card--usecase:nth-child(2) .stage-card-link { color: #E3C34A; }

.stage-cards-list .card--usecase:nth-child(3) { border-top-color: #6E8FAF; }
.stage-cards-list .card--usecase:nth-child(3):hover {
  border-color: #6E8FAF;
  background: radial-gradient(circle at top left, rgba(110, 143, 175, 0.2), #C7D6E2);
}
.stage-cards-list .card--usecase:nth-child(3) .stage-card-link { color: #6E8FAF; }

.stage-cards-list .card--usecase:nth-child(4) { border-top-color: #E17A55; }
.stage-cards-list .card--usecase:nth-child(4):hover {
  border-color: #E17A55;
  background: radial-gradient(circle at top left, rgba(225, 122, 85, 0.2), #F3C1AF);
}
.stage-cards-list .card--usecase:nth-child(4) .stage-card-link { color: #E17A55; }

.stage-cards-list .card--usecase:nth-child(5) { border-top-color: #E17A55; }
.stage-cards-list .card--usecase:nth-child(5):hover {
  border-color: #E17A55;
  background: radial-gradient(circle at top left, rgba(225, 122, 85, 0.2), #F3C1AF);
}
.stage-cards-list .card--usecase:nth-child(5) .stage-card-link { color: #E17A55; }

.stage-cards-list .card--usecase:nth-child(6) { border-top-color: #8C7CB8; }
.stage-cards-list .card--usecase:nth-child(6):hover {
  border-color: #8C7CB8;
  background: radial-gradient(circle at top left, rgba(140, 124, 184, 0.2), #D6CCE7);
}
.stage-cards-list .card--usecase:nth-child(6) .stage-card-link { color: #8C7CB8; }

/* Grid 4x2 específico para 8 elementos */
.grid--4x2 {
  grid-template-columns: repeat(4, 1fr);
  gap: 20px;
}

.cards {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(min(280px, 100%), 1fr));
  gap: 24px;
  max-width: 1200px;
  margin: 0 auto;
}

/* Cards con mejor estructura */
.cards--2 {
  grid-template-columns: repeat(2, 1fr);
}

.cards--3 {
  grid-template-columns: repeat(3, 1fr);
}

.cards--4 {
  grid-template-columns: repeat(4, 1fr);
}

.card {
  border-radius: 18px;
  padding: 24px 20px;
  background: rgba(41, 51, 69, 0.92);
  border: 1px solid rgba(250, 250, 247, 0.2);
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.card:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);
}

.card:focus-within {
  outline: 2px solid #970036;
  outline-offset: 2px;
}

.section--light .card {
  background: rgba(255, 255, 255, 0.95);
  border-color: rgba(41, 51, 69, 0.15);
}

.section--light .card:hover {
  background: rgba(255, 255, 255, 1);
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12);
}

.section--light .card:focus-within {
  outline: 2px solid var(--accent-light);
  outline-offset: 2px;
}

.card h3 {
  margin: 0 0 12px;
  font-size: 1.2rem;
  font-weight: 600;
  letter-spacing: -0.02em;
  line-height: 1.3;
  color: #fafaf7;
  display: flex;
  align-items: center;
  gap: 10px;
}

.section--light .card h3 {
  color: #151b26;
}

.card h3 i {
  color: #970036;
  font-size: 1.1rem;
  flex-shrink: 0;
}

.section--light .card h3 i {
  color: var(--accent-light);
}

.card h4 {
  margin: 0 0 10px;
  font-size: 1.05rem;
  font-weight: 600;
  color: #e8e8e4;
}

.section--light .card h4 {
  color: #151b26;
}

.card p {
  margin: 0 0 14px;
  font-size: 0.95rem;
  opacity: 0.95;
  line-height: 1.7;
  color: #e8e8e4;
}

.section--light .card p {
  color: #374151;
  opacity: 0.9;
}

.card ul {
  margin: 0;
  padding-left: 0;
  list-style: none;
  font-size: 0.9rem;
}

.card ul li {
  margin-bottom: 10px;
  padding-left: 1.5rem;
  position: relative;
  line-height: 1.6;
  color: #e8e8e4;
}

.section--light .card ul li {
  color: #374151;
}

.section--light .card ul li::before {
  color: var(--accent-light);
}

.section--light .card--feature {
  border-top-color: var(--accent-light);
}

.card--link {
  display: block;
  text-decoration: none;
  color: inherit;
}

.card--link:hover {
  text-decoration: none;
  color: inherit;
}

.card--link i {
  margin-right: 8px;
  opacity: 0.9;
}

.card ul li::before {
  content: "▸";
  position: absolute;
  left: 0;
  color: #970036;
  font-weight: 600;
}

.card--feature {
  border-top: 3px solid #970036;
}

.card--deliverable {
  border-top: 3px solid #8C7CB8;
}

.card--usecase {
  border-top: 3px solid #5FAFA8;
  display: flex;
  flex-direction: column;
  align-items: flex-start;
}

.card--usecase .btn--ghost,
.card--usecase .stage-toggle {
  margin-top: auto;
}

.stage-card-link {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  margin-top: 12px;
  font-size: 0.9rem;
  font-weight: 500;
  color: #970036;
  transition: opacity 0.2s ease;
}

.stage-card-link:hover {
  opacity: 0.9;
}

.stage-card-link i {
  font-size: 0.8rem;
}

.section--light .stage-card-link {
  color: var(--accent-light);
}

.card--usecase > div[role="region"] {
  margin-top: 12px;
  padding-top: 12px;
  border-top: 1px solid rgba(250, 250, 247, 0.15);
  font-size: 0.95rem;
  line-height: 1.6;
  color: #e8e8e4;
  width: 100%;
}

.section--light .card--usecase > div[role="region"] {
  border-top-color: rgba(41, 51, 69, 0.15);
  color: #374151;
}

/* Grid de criterios (dos cards + conector "y") */
.criteria-grid {
  display: grid;
  grid-template-columns: 1fr auto 1fr;
  gap: 24px 32px;
  align-items: center;
  max-width: 900px;
  margin: 0 auto;
}

.criteria-connector {
  font-size: 1.25rem;
  font-weight: 600;
  color: rgba(250, 250, 247, 0.7);
  text-transform: lowercase;
  text-align: center;
}

.section--light .criteria-connector {
  color: #6b7280;
}

/* Hero */

.hero {
  min-height: 88vh;
  padding: 140px 24px 80px;
  color: #fafaf7;
  position: relative;
  overflow: hidden;
}

.hero__parallax-bg {
  position: absolute;
  inset: 0;
  z-index: 0;
  background:
    radial-gradient(circle at top left, #970036 0, rgba(151, 0, 54, 0) 45%),
    radial-gradient(circle at top right, rgba(151, 0, 54, 0.5) 0, transparent 55%),
    radial-gradient(circle at bottom, #1a2030 5%, #151b26 65%);
  will-change: transform;
}

.nav {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  max-width: 100%;
  margin: 0 auto;
  padding: 16px 24px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 24px;
  background: rgba(41, 51, 69, 0);
  backdrop-filter: blur(0px);
  -webkit-backdrop-filter: blur(0px);
  border-bottom: 1px solid transparent;
  z-index: 1000;
  transition: background 0.3s ease, backdrop-filter 0.3s ease, border-color 0.3s ease, box-shadow 0.3s ease;
  box-shadow: none;
}

.nav::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: inherit;
  z-index: -1;
}

.nav--scrolled {
  background: rgba(41, 51, 69, 0.88);
  backdrop-filter: blur(16px) saturate(180%);
  -webkit-backdrop-filter: blur(16px) saturate(180%);
  border-bottom: 1px solid rgba(250, 250, 247, 0.08);
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

.nav__logo {
  font-weight: 700;
  letter-spacing: 0.08em;
  font-size: 0.9rem;
  text-transform: uppercase;
  padding: 6px 12px;
  border-radius: 999px;
  background: rgba(151, 0, 54, 0.25);
  border: 1px solid rgba(151, 0, 54, 0.5);
  color: #fafaf7;
  transition: background 0.2s ease, border-color 0.2s ease;
  display: flex;
  align-items: center;
  gap: 8px;
}

.nav__logo i {
  color: #fafaf7;
  font-size: 1rem;
  flex-shrink: 0;
  transition: color 0.3s ease;
}

.nav--scrolled .nav__logo i {
  color: #970036;
}

.nav__logo:hover {
  background: rgba(151, 0, 54, 0.4);
  border-color: #970036;
}

.nav__links {
  list-style: none;
  display: flex;
  gap: 4px;
  margin: 0;
  padding: 0;
  font-size: 0.8rem;
  flex-wrap: wrap;
  justify-content: flex-end;
  align-items: center;
}

.nav__links li {
  display: flex;
}

.nav__links a {
  padding: 6px 10px;
  border-radius: 6px;
  color: #fafaf7;
  opacity: 0.9;
  transition: background 0.2s ease, color 0.2s ease, opacity 0.2s ease, transform 0.1s ease;
  font-weight: 500;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 3px;
  text-align: center;
  min-width: 55px;
  white-space: nowrap;
}

.nav__links a i {
  font-size: 0.9rem;
  opacity: 0.85;
  flex-shrink: 0;
}

.nav__links a span {
  font-size: 0.7rem;
  line-height: 1.1;
  display: block;
}

.nav__links a:hover {
  background: rgba(250, 250, 247, 0.12);
  color: #fafaf7;
  opacity: 1;
  transform: translateY(-1px);
}

.nav__links a:hover i {
  opacity: 1;
  color: #970036;
}

.nav__links a:focus-visible {
  outline: 2px solid #970036;
  outline-offset: 2px;
  border-radius: 6px;
}

.nav__links a.is-active {
  background: rgba(151, 0, 54, 0.25);
  color: #fafaf7;
}

.nav__links a.is-active i {
  opacity: 1;
  color: #970036;
}

/* Botón hamburguesa: oculto en desktop */
.nav__toggle {
  display: none;
  position: relative;
  background: transparent;
  border: 1px solid rgba(250, 250, 247, 0.3);
  color: #fafaf7;
  width: 44px;
  height: 44px;
  border-radius: 8px;
  cursor: pointer;
  align-items: center;
  justify-content: center;
  transition: background 0.2s ease, border-color 0.2s ease;
}

.nav__toggle:hover {
  background: rgba(250, 250, 247, 0.1);
  border-color: rgba(250, 250, 247, 0.5);
}

.nav__toggle:focus-visible {
  outline: 2px solid #970036;
  outline-offset: 2px;
}

.nav__toggle-icon {
  font-size: 1.25rem;
  position: absolute;
}

.nav__toggle-icon--close {
  display: none;
}

.nav--open .nav__toggle-icon--open {
  display: none;
}

.nav--open .nav__toggle-icon--close {
  display: block;
}

.hero__content {
  position: relative;
  z-index: 1;
  max-width: 1200px;
  margin: 0 auto;
  display: grid;
  grid-template-columns: minmax(0, 1.2fr) minmax(0, 1fr);
  gap: 48px;
  align-items: start;
  padding-top: 20px;
}

.hero__text h1 {
  font-size: clamp(2.1rem, 2.6vw + 1.6rem, 2.95rem);
  letter-spacing: -0.05em;
  margin: 0 0 24px;
  padding-top: 0;
  line-height: 1.15;
}

.hero__subtitle {
  margin: 0 0 24px;
  font-size: 1.05rem;
  max-width: 600px;
  color: #e8e8e4;
  opacity: 0.95;
  line-height: 1.6;
}

.hero__actions {
  display: flex;
  flex-wrap: wrap;
  gap: 16px;
  margin-bottom: 32px;
}

.hero__note {
  margin: 0 0 40px;
  font-size: 0.9rem;
  color: #e8e8e4;
  opacity: 0.85;
  line-height: 1.5;
  max-width: 600px;
}

.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  padding: 12px 20px;
  border-radius: 999px;
  font-size: 0.95rem;
  font-weight: 500;
  border: 1px solid transparent;
  cursor: pointer;
  transition: background 0.2s ease, color 0.2s ease, border-color 0.2s ease,
    transform 0.1s ease;
  min-height: 44px;
}

.btn i {
  font-size: 0.9rem;
  flex-shrink: 0;
}

.btn:focus-visible {
  outline: 3px solid #970036;
  outline-offset: 2px;
}

.btn:active {
  transform: scale(0.98);
}

.btn--primary {
  background: linear-gradient(135deg, #970036, #6b0028);
  color: #fafaf7;
  border-color: rgba(41, 51, 69, 0.5);
  box-shadow: 0 12px 30px rgba(151, 0, 54, 0.4);
}

.btn--primary:hover {
  transform: translateY(-1px);
  box-shadow: 0 16px 40px rgba(151, 0, 54, 0.5);
}

.btn--ghost {
  background: rgba(41, 51, 69, 0.85);
  color: #e8e8e4;
  border-color: rgba(250, 250, 247, 0.4);
}

.btn--ghost:hover {
  background: rgba(41, 51, 69, 1);
  border-color: #970036;
  color: #fafaf7;
}

.hero__visual {
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  gap: 24px;
  justify-content: flex-start;
}

.hero__visual-img {
  display: block;
  max-height: min(420px, 50vh);
  width: auto;
  height: auto;
  max-width: 100%;
  object-fit: contain;
  object-position: bottom right;
  flex-shrink: 0;
}

.hero-card {
  width: 100%;
  max-width: 380px;
  border-radius: 22px;
  padding: 18px 18px 20px;
  background: radial-gradient(circle at top left, rgba(151, 0, 54, 0.25), #151b26);
  border: 1px solid rgba(250, 250, 247, 0.25);
  box-shadow: 0 22px 65px rgba(41, 51, 69, 0.95);
  backdrop-filter: blur(20px);
}

.hero-card__header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 12px;
}

.pill {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  border-radius: 999px;
  padding: 5px 10px;
  font-size: 0.75rem;
  border: 1px solid rgba(250, 250, 247, 0.4);
}

.pill--accent {
  background: rgba(41, 51, 69, 0.95);
}

.hero-card__tag {
  font-size: 0.75rem;
  opacity: 0.9;
}

.hero-card__prompt {
  font-size: 0.9rem;
  margin: 0 0 16px;
  padding: 10px 12px;
  border-radius: 14px;
  background: rgba(41, 51, 69, 0.9);
  border: 1px solid rgba(250, 250, 247, 0.2);
}

.hero-card__charts {
  display: grid;
  grid-template-columns: 1.2fr 1fr;
  gap: 14px;
  align-items: stretch;
}

.mini-chart {
  border-radius: 14px;
  padding: 10px;
  background: linear-gradient(135deg, rgba(151, 0, 54, 0.15), rgba(41, 51, 69, 0.96));
  border: 1px solid rgba(250, 250, 247, 0.2);
}

.mini-chart--bars {
  display: flex;
  align-items: flex-end;
  justify-content: space-between;
  gap: 6px;
}

.mini-chart__bar {
  flex: 1;
  border-radius: 999px;
  background: linear-gradient(180deg, #970036, #6b0028);
  height: 0;
  transition: height 0.8s ease-out;
}

.mini-chart--donut {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 6px;
  text-align: center;
  font-size: 0.8rem;
}

.mini-chart__donut {
  width: 70px;
  height: 70px;
  border-radius: 999px;
  background: conic-gradient(
    from 0deg,
    #5FAFA8 0 32%,
    rgba(41, 51, 69, 0.65) 32% 100%
  );
  display: flex;
  align-items: center;
  justify-content: center;
  color: #fafaf7;
  font-weight: 600;
  font-size: 0.85rem;
}

.mini-chart--donut p {
  margin: 0;
  opacity: 0.9;
}

/* Timeline */

.timeline {
  max-width: 780px;
  margin: 0 auto;
  display: grid;
  gap: 18px;
}

.timeline__item {
  display: grid;
  grid-template-columns: auto minmax(0, 1fr);
  gap: 14px;
  align-items: flex-start;
}

.timeline__step {
  width: 32px;
  height: 32px;
  border-radius: 999px;
  background: linear-gradient(135deg, #970036, #6b0028);
  color: #fafaf7;
  font-weight: 700;
  font-size: 0.9rem;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 10px 22px rgba(151, 0, 54, 0.4);
}

.timeline h3 {
  margin: 0 0 4px;
  font-size: 1rem;
}

.timeline p {
  margin: 0;
  font-size: 0.9rem;
  opacity: 0.9;
}

/* Tabla comparativa y table-card */

.table-cards {
  display: grid;
  gap: 28px;
  max-width: 1200px;
  margin: 0 auto;
}

.table-card {
  border-radius: 18px;
  padding: 28px 24px;
  background: rgba(41, 51, 69, 0.92);
  border: 1px solid rgba(250, 250, 247, 0.2);
  box-shadow: 0 4px 24px rgba(0, 0, 0, 0.15);
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.table-card:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
}

.section--light .table-card {
  background: rgba(255, 255, 255, 0.98);
  border-color: rgba(41, 51, 69, 0.15);
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
}

.section--light .table-card:hover {
  box-shadow: 0 8px 28px rgba(0, 0, 0, 0.12);
}

.table-card__title {
  margin: 0 0 20px;
  font-size: 1.15rem;
  font-weight: 700;
  color: #fafaf7;
  display: flex;
  align-items: center;
  gap: 10px;
}

.table-card__title i {
  color: #970036;
  font-size: 1.1rem;
}

.section--light .table-card__title i {
  color: var(--accent-light);
}

.section--light .table-card__title {
  color: #151b26;
}

.table-card .table-wrapper {
  margin: 0;
  border-radius: 12px;
  overflow: hidden;
}

.table-wrapper {
  max-width: 100%;
  margin: 0 auto;
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
  border-radius: 14px;
}

.table-wrapper::-webkit-scrollbar {
  height: 8px;
}

.table-wrapper::-webkit-scrollbar-track {
  background: rgba(15, 23, 42, 0.3);
  border-radius: 4px;
}

.table-wrapper::-webkit-scrollbar-thumb {
  background: rgba(148, 163, 184, 0.5);
  border-radius: 4px;
}

.table-wrapper::-webkit-scrollbar-thumb:hover {
  background: rgba(148, 163, 184, 0.7);
}

.comparison-table {
  width: 100%;
  border-collapse: collapse;
  font-size: 0.95rem;
  background: transparent;
  border-radius: 12px;
  overflow: hidden;
}

.comparison-table thead {
  background: rgba(151, 0, 54, 0.15);
}

.comparison-table thead th {
  padding: 16px 18px;
  text-align: left;
  font-weight: 700;
  font-size: 0.9rem;
  color: #fafaf7;
  border-bottom: 2px solid rgba(250, 250, 247, 0.2);
  letter-spacing: 0.02em;
}

.section--light .comparison-table thead th {
  color: var(--accent-light);
  background: rgba(41, 51, 69, 0.08);
  border-bottom-color: rgba(41, 51, 69, 0.15);
}

.comparison-table tbody tr {
  transition: background 0.15s ease;
}

.comparison-table tbody tr:nth-child(even) {
  background: rgba(250, 250, 247, 0.04);
}

.comparison-table tbody tr:hover {
  background: rgba(151, 0, 54, 0.08);
}

.section--light .comparison-table tbody tr:nth-child(even) {
  background: rgba(0, 0, 0, 0.02);
}

.section--light .comparison-table tbody tr:hover {
  background: rgba(41, 51, 69, 0.06);
}

.comparison-table tbody td {
  padding: 14px 18px;
  border-bottom: 1px solid rgba(250, 250, 247, 0.1);
  color: #e8e8e4;
  line-height: 1.5;
}

.section--light .comparison-table tbody td {
  color: #334155;
  border-bottom-color: rgba(41, 51, 69, 0.12);
}

.comparison-table tbody tr:last-child td {
  border-bottom: none;
}

.section--light .comparison-table {
  background: transparent;
  border: none;
}

/* Estilos de tabla ya definidos arriba con mejor estructura */

/* Dashboard */

.dashboard {
  max-width: 1100px;
  margin: 0 auto;
  display: grid;
  grid-template-columns: minmax(0, 0.9fr) minmax(0, 1.2fr);
  gap: 24px;
  align-items: flex-start;
}

.dashboard__kpis {
  display: grid;
  gap: 14px;
}

.kpi-card {
  border-radius: 16px;
  padding: 14px 14px 12px;
  background: radial-gradient(circle at top left, rgba(34, 197, 94, 0.18), #020617);
  border: 1px solid rgba(34, 197, 94, 0.55);
  box-shadow: 0 14px 36px rgba(22, 163, 74, 0.55);
}

.kpi-card:nth-child(2) {
  background: radial-gradient(circle at top left, rgba(56, 189, 248, 0.18), #020617);
  border-color: rgba(56, 189, 248, 0.7);
  box-shadow: 0 14px 36px rgba(41, 51, 69, 0.6);
}

.kpi-card:nth-child(3) {
  background: radial-gradient(circle at top left, rgba(168, 85, 247, 0.2), #020617);
  border-color: rgba(168, 85, 247, 0.7);
  box-shadow: 0 14px 36px rgba(147, 51, 234, 0.6);
}

.kpi-card__label {
  display: block;
  font-size: 0.75rem;
  opacity: 0.75;
  margin-bottom: 4px;
}

.kpi-card__value {
  display: block;
  font-size: 1.3rem;
  font-weight: 600;
}

.kpi-card__delta {
  display: inline-flex;
  margin-top: 4px;
  font-size: 0.78rem;
  padding: 3px 8px;
  border-radius: 999px;
  background: rgba(15, 23, 42, 0.9);
}

.kpi-card__delta--up {
  color: #bbf7d0;
}

.dashboard__chart {
  border-radius: 18px;
  padding: 16px 16px 14px;
  background: radial-gradient(circle at top left, rgba(56, 189, 248, 0.2), #020617);
  border: 1px solid rgba(148, 163, 184, 0.7);
  box-shadow: 0 18px 45px rgba(15, 23, 42, 0.9);
}

.dashboard__chart-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
  margin-bottom: 12px;
}

.dashboard__chart-header h3 {
  margin: 0;
  font-size: 1rem;
}

.dashboard__legend {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
  font-size: 0.8rem;
}

.legend-item {
  display: inline-flex;
  align-items: center;
  gap: 5px;
}

.legend-item::before {
  content: "";
  width: 12px;
  height: 6px;
  border-radius: 999px;
  display: inline-block;
}

.legend-item--primary::before {
  background: linear-gradient(90deg, #38bdf8, #0ea5e9);
}

.legend-item--secondary::before {
  background: linear-gradient(90deg, #4b5563, #9ca3af);
}

.dashboard__bars {
  display: grid;
  gap: 8px;
  margin-top: 4px;
}

.dashboard__bar-group {
  display: grid;
  grid-template-columns: 70px minmax(0, 1fr);
  gap: 10px;
  align-items: center;
  font-size: 0.82rem;
}

.dashboard__bar-label {
  opacity: 0.9;
}

.dashboard__bar {
  height: 14px;
  border-radius: 999px;
  background: rgba(15, 23, 42, 0.9);
  position: relative;
  overflow: hidden;
}

.dashboard__bar--primary::before,
.dashboard__bar--secondary::before {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
  transform-origin: left;
  transform: scaleX(0);
  transition: transform 0.9s ease-out;
}

.dashboard__bar--primary::before {
  background: linear-gradient(90deg, #38bdf8, #0ea5e9);
}

.dashboard__bar--secondary::before {
  background: linear-gradient(90deg, #6b7280, #d1d5db);
}

/* Sección objetivo final (CTA) */

.section-cta {
  text-align: center;
  padding: 80px 24px 100px;
}

.cta-inner {
  max-width: 720px;
  margin: 0 auto;
}

.cta-icon {
  margin: 0 0 20px;
  font-size: 2.5rem;
  color: #970036;
  opacity: 0.95;
}

.cta-title {
  margin: 0;
  font-size: clamp(1.5rem, 3.5vw, 2rem);
  font-weight: 700;
  line-height: 1.3;
  color: #fafaf7;
  letter-spacing: -0.02em;
}

.cta-title strong {
  color: #970036;
}

/* Footer */

.footer {
  padding: 24px 20px 28px;
  background: #151b26;
  color: rgba(250, 250, 247, 0.85);
  text-align: center;
  font-size: 0.85rem;
  border-top: 1px solid rgba(41, 51, 69, 0.9);
}

.footer p {
  margin: 0;
}

.footer p + p {
  margin-top: 6px;
}

/* Enlaces rápidos por etapa */

.stage-links {
  position: relative;
  margin-top: 28px;
  margin-bottom: 28px;
  padding-top: 20px;
  border-top: none;
  max-width: 1200px;
  margin-left: auto;
  margin-right: auto;
}

/* Línea que se extiende a la derecha para integrar con Don Luis (libreta) */
.stage-links::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: calc(100% + 45vw);
  height: 1px;
  background: rgba(148, 163, 184, 0.25);
}

.stage-links__buttons {
  display: flex;
  flex-wrap: nowrap;
  gap: 10px;
  justify-content: center;
  align-items: center;
}

.chip {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
  border-radius: 999px;
  padding: 6px 12px;
  font-size: 0.8rem;
  background: rgba(41, 51, 69, 0.7);
  border: 1px solid rgba(250, 250, 247, 0.25);
  color: #fafaf7;
  transition: transform 0.15s ease, border-color 0.15s ease, background 0.15s ease;
  min-height: 34px;
  font-weight: 500;
  white-space: nowrap;
  flex-shrink: 0;
}

.chip:hover {
  transform: translateY(-1px);
  background: rgba(41, 51, 69, 0.9);
  border-color: rgba(250, 250, 247, 0.4);
}

.chip:focus-visible {
  outline: 2px solid #970036;
  outline-offset: 2px;
}

/* Colores de chips por etapa (paleta colegio) */

/* Acceso rápido: Raíz=Escuelita (verde agua), Tallo=Infantil (amarillo/crema) */
.chip[href*="raiz"] {
  background: #C8E4E2;
  border-color: #5FAFA8;
  color: #151b26;
}

.chip[href*="raiz"]:hover {
  background: #5FAFA8;
  border-color: #5FAFA8;
  color: #fff;
}

.chip[href*="tallo"] {
  background: #F7E8B8;
  border-color: #E3C34A;
  color: #151b26;
}

.chip[href*="tallo"]:hover {
  background: #E3C34A;
  border-color: #E3C34A;
  color: #151b26;
}

.chip[href*="nudo"] {
  background: #C7D6E2;
  border-color: #6E8FAF;
  color: #151b26;
}

.chip[href*="nudo"]:hover {
  background: #6E8FAF;
  border-color: #6E8FAF;
  color: #fff;
}

.chip[href*="rama"] {
  background: #F3C1AF;
  border-color: #E17A55;
  color: #151b26;
}

.chip[href*="rama"]:hover {
  background: #E17A55;
  border-color: #E17A55;
  color: #fff;
}

.chip[href*="flor"] {
  background: #F3C1AF;
  border-color: #E17A55;
  color: #151b26;
}

.chip[href*="flor"]:hover {
  background: #E17A55;
  border-color: #E17A55;
  color: #fff;
}

.chip[href*="fruto"] {
  background: #D6CCE7;
  border-color: #8C7CB8;
  color: #151b26;
}

.chip[href*="fruto"]:hover {
  background: #8C7CB8;
  border-color: #8C7CB8;
  color: #fff;
}

/* Chips por nombre de etapa (enlaces alternativos) */
.chip[href*="escuelita"] {
  border-color: rgba(95, 175, 168, 0.6);
}

.chip[href*="escuelita"]:hover {
  border-color: #5FAFA8;
  background: rgba(95, 175, 168, 0.2);
}

.chip[href*="infantil"] {
  border-color: rgba(227, 195, 74, 0.6);
}

.chip[href*="infantil"]:hover {
  border-color: #E3C34A;
  background: rgba(227, 195, 74, 0.2);
}

.chip[href*="primaria"] {
  border-color: rgba(110, 143, 175, 0.6);
}

.chip[href*="primaria"]:hover {
  border-color: #6E8FAF;
  background: rgba(110, 143, 175, 0.2);
}

.chip[href*="eso"] {
  border-color: rgba(225, 122, 85, 0.6);
}

.chip[href*="eso"]:hover {
  border-color: #E17A55;
  background: rgba(225, 122, 85, 0.2);
}

.chip[href*="bachillerato"] {
  border-color: rgba(225, 122, 85, 0.6);
}

.chip[href*="bachillerato"]:hover {
  border-color: #E17A55;
  background: rgba(225, 122, 85, 0.2);
}

.chip[href*="fp"] {
  border-color: rgba(140, 124, 184, 0.6);
}

.chip[href*="fp"]:hover {
  border-color: #8C7CB8;
  background: rgba(140, 124, 184, 0.2);
}

/* Timeline EBI */

.timeline-ebi {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
  gap: 12px;
  max-width: 1000px;
  margin: 0 auto;
}

.timeline-ebi__item {
  padding: 14px;
  border-radius: 14px;
  background: rgba(41, 51, 69, 0.85);
  border: 1px solid rgba(250, 250, 247, 0.2);
  text-align: center;
  font-size: 0.88rem;
}

.timeline-ebi__phase {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 4px 10px;
  margin-bottom: 6px;
  border-radius: 999px;
  font-weight: 600;
  background: linear-gradient(135deg, #970036, #6b0028);
  color: #fafaf7;
}

/* Colores específicos por etapa (paleta colegio) */
.timeline-ebi__item:nth-child(1) .timeline-ebi__phase {
  background: linear-gradient(135deg, #5FAFA8, #4a8f8a);
  color: #fafaf7;
}

.timeline-ebi__item:nth-child(2) .timeline-ebi__phase {
  background: linear-gradient(135deg, #E3C34A, #c9a83a);
  color: #151b26;
}

.timeline-ebi__item:nth-child(3) .timeline-ebi__phase {
  background: linear-gradient(135deg, #6E8FAF, #3B5F85);
  color: #fafaf7;
}

.timeline-ebi__item:nth-child(4) .timeline-ebi__phase {
  background: linear-gradient(135deg, #E17A55, #c96540);
  color: #151b26;
}

.timeline-ebi__item:nth-child(5) .timeline-ebi__phase {
  background: linear-gradient(135deg, #E17A55, #c96540);
  color: #151b26;
}

.timeline-ebi__item:nth-child(6) .timeline-ebi__phase {
  background: linear-gradient(135deg, #8C7CB8, #6b5d96);
  color: #fafaf7;
}

/* Diagramas */

.diagram {
  height: 130px;
  border-radius: 14px;
  margin-bottom: 12px;
  border: 1px dashed rgba(148, 163, 184, 0.7);
  position: relative;
  overflow: hidden;
  background: rgba(15, 23, 42, 0.55);
}

.diagram--timeline::before {
  content: "";
  position: absolute;
  top: 50%;
  left: 12px;
  right: 12px;
  height: 3px;
  background: linear-gradient(90deg, #38bdf8, #a855f7);
  border-radius: 999px;
}

.diagram--timeline::after {
  content: "";
  position: absolute;
  top: 50%;
  left: 12px;
  width: 8px;
  height: 8px;
  border-radius: 999px;
  background: #f9fafb;
  box-shadow: 60px 0 0 #f9fafb, 120px 0 0 #f9fafb, 180px 0 0 #f9fafb;
  transform: translateY(-50%);
}

.diagram--orbits::before,
.diagram--orbits::after {
  content: "";
  position: absolute;
  inset: 18px;
  border-radius: 999px;
  border: 2px solid rgba(56, 189, 248, 0.8);
}

.diagram--orbits::after {
  inset: 40px;
  border-color: rgba(168, 85, 247, 0.8);
}

.diagram--flow::before {
  content: "";
  position: absolute;
  inset: 20px 16px;
  border-radius: 12px;
  background: linear-gradient(135deg, rgba(56, 189, 248, 0.2), rgba(15, 23, 42, 0.9));
}

.diagram--rings {
  background:
    radial-gradient(circle at center, rgba(56, 189, 248, 0.3) 18%, transparent 20%),
    radial-gradient(circle at center, rgba(168, 85, 247, 0.25) 38%, transparent 40%),
    radial-gradient(circle at center, rgba(34, 197, 94, 0.2) 58%, transparent 60%);
}

.diagram--zones::before {
  content: "";
  position: absolute;
  inset: 12px;
  border-radius: 12px;
  border: 1px solid rgba(148, 163, 184, 0.6);
  box-shadow: inset 0 0 0 1px rgba(148, 163, 184, 0.4);
}

.diagram--zones::after {
  content: "";
  position: absolute;
  inset: 12px;
  background:
    linear-gradient(90deg, transparent 49%, rgba(148, 163, 184, 0.5) 50%, transparent 51%),
    linear-gradient(transparent 49%, rgba(148, 163, 184, 0.5) 50%, transparent 51%);
}

.diagram--bars::before {
  content: "";
  position: absolute;
  bottom: 14px;
  left: 14px;
  width: 16px;
  height: 60px;
  background: #38bdf8;
  border-radius: 6px;
  box-shadow: 26px -10px 0 #a855f7, 52px 8px 0 #22c55e;
}

.diagram--radar::before {
  content: "";
  position: absolute;
  inset: 20px;
  border-radius: 999px;
  border: 1px solid rgba(148, 163, 184, 0.6);
  box-shadow: inset 0 0 0 12px rgba(15, 23, 42, 0.6);
}

.diagram--mindmap::before {
  content: "";
  position: absolute;
  inset: 35px;
  border-radius: 999px;
  background: rgba(56, 189, 248, 0.25);
  box-shadow:
    -45px -20px 0 rgba(168, 85, 247, 0.3),
    45px -20px 0 rgba(34, 197, 94, 0.3),
    -45px 20px 0 rgba(14, 165, 233, 0.3),
    45px 20px 0 rgba(236, 72, 153, 0.3);
}

.diagram--pipeline::before {
  content: "";
  position: absolute;
  left: 12px;
  right: 12px;
  top: 50%;
  height: 10px;
  background: linear-gradient(90deg, #38bdf8, #a855f7);
  border-radius: 999px;
  transform: translateY(-50%);
}

.diagram--pipeline::after {
  content: "";
  position: absolute;
  top: 35%;
  left: 12px;
  width: 16px;
  height: 16px;
  background: #f9fafb;
  border-radius: 4px;
  box-shadow: 60px 0 0 #f9fafb, 120px 0 0 #f9fafb, 180px 0 0 #f9fafb;
}

.diagram--cards::before {
  content: "";
  position: absolute;
  inset: 20px 16px;
  border-radius: 10px;
  border: 1px solid rgba(148, 163, 184, 0.7);
  box-shadow: 12px -12px 0 rgba(56, 189, 248, 0.25),
    -12px 12px 0 rgba(168, 85, 247, 0.2);
}

/* Gráficos dinámicos */

.chart-container {
  max-width: 1000px;
  margin: 0 auto 60px;
  padding: 32px;
  background: rgba(255, 255, 255, 0.95);
  border-radius: 18px;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
}

.section--light .chart-container {
  background: rgba(15, 23, 42, 0.95);
  color: #f9fafb;
}

.chart-title {
  margin: 0 0 32px;
  font-size: 1.5rem;
  text-align: center;
  color: #020617;
}

.section--light .chart-title {
  color: #f9fafb;
}

.chart-subtitle {
  margin: -16px 0 20px;
  text-align: center;
  font-size: 0.95rem;
  opacity: 0.9;
}

.chart-wrapper {
  position: relative;
  margin: 0 auto;
  min-height: 280px;
}

.chart-wrapper--autonomy {
  max-width: 700px;
  height: 340px;
}

.chart-wrapper--radar {
  max-width: 420px;
  height: 380px;
}

.chart-wrapper canvas {
  max-width: 100%;
  height: auto !important;
}

/* Selector de etapa para radar */
.radar-stage-selector {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  justify-content: center;
  margin-bottom: 24px;
}

.radar-stage-btn {
  padding: 10px 18px;
  font-size: 0.9rem;
  font-weight: 600;
  border: 2px solid rgba(59, 130, 246, 0.4);
  border-radius: 999px;
  background: rgba(255, 255, 255, 0.9);
  color: #1e40af;
  cursor: pointer;
  transition: background 0.2s, transform 0.2s, border-color 0.2s, box-shadow 0.2s;
}

.radar-stage-btn:hover {
  background: rgba(59, 130, 246, 0.15);
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(59, 130, 246, 0.25);
}

.radar-stage-btn:focus-visible {
  outline: 3px solid #3b82f6;
  outline-offset: 2px;
}

.radar-stage-btn.active {
  background: linear-gradient(135deg, #3b82f6, #8b5cf6);
  color: #fff;
  border-color: transparent;
  box-shadow: 0 4px 16px rgba(59, 130, 246, 0.4);
}

.section--light .radar-stage-btn {
  background: rgba(15, 23, 42, 0.6);
  color: #e5e7eb;
  border-color: rgba(148, 163, 184, 0.3);
}

.section--light .radar-stage-btn:hover {
  background: rgba(59, 130, 246, 0.2);
}

.section--light .radar-stage-btn.active {
  background: linear-gradient(135deg, #3b82f6, #8b5cf6);
  color: #fff;
  border-color: transparent;
}

/* Parallax */
.parallax-section {
  position: relative;
}

.parallax-section .hero__parallax-bg {
  transform: translateZ(0);
}

/* Gráfico de barras de autonomía (legacy, se mantiene por si hay referencias) */
.bar-chart {
  display: flex;
  align-items: flex-end;
  justify-content: space-around;
  gap: 16px;
  height: 400px;
  padding: 20px;
  background: rgba(249, 250, 251, 0.5);
  border-radius: 12px;
}

.section--light .bar-chart {
  background: rgba(15, 23, 42, 0.3);
}

.bar-chart__bar {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8px;
  position: relative;
}

.bar-chart__label {
  font-size: 0.85rem;
  font-weight: 600;
  color: #020617;
  text-align: center;
}

.section--light .bar-chart__label {
  color: #f9fafb;
}

.bar-chart__fill {
  width: 100%;
  background: linear-gradient(to top, var(--bar-color, #3b82f6), var(--bar-color-light, #60a5fa));
  border-radius: 8px 8px 0 0;
  transition: height 1s ease-out;
  height: 0;
  min-height: 20px;
  position: relative;
  box-shadow: 0 -2px 8px rgba(0, 0, 0, 0.15);
}

.bar-chart__value {
  font-size: 0.9rem;
  font-weight: 700;
  color: #020617;
  margin-top: 4px;
}

.section--light .bar-chart__value {
  color: #f9fafb;
}

/* Gráfico radar */
.radar-chart {
  position: relative;
  padding: 40px;
  display: flex;
  flex-direction: column;
  align-items: center;
}

.radar-chart__svg {
  width: 100%;
  max-width: 400px;
  height: auto;
}

.radar-chart__legend {
  display: flex;
  flex-wrap: wrap;
  gap: 16px;
  justify-content: center;
  margin-top: 24px;
}

.radar-chart__legend-item {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 0.9rem;
}

.radar-chart__legend-color {
  width: 16px;
  height: 16px;
  border-radius: 4px;
}

/* Timeline detallado */
.detailed-timeline {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
  gap: 20px;
  padding: 24px;
}

.detailed-timeline__item {
  padding: 20px;
  border-radius: 16px;
  background: rgba(15, 23, 42, 0.9);
  border: 2px solid rgba(148, 163, 184, 0.3);
  text-align: center;
  transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.detailed-timeline__item:hover {
  transform: translateY(-4px);
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);
}

.detailed-timeline__phase {
  font-size: 1.4rem;
  font-weight: 700;
  margin-bottom: 8px;
  color: #f9fafb;
}

.detailed-timeline__ages {
  font-size: 0.85rem;
  color: #94a3b8;
  margin-bottom: 12px;
}

.detailed-timeline__stages {
  font-size: 0.9rem;
  color: #e5e7eb;
  margin-bottom: 16px;
  line-height: 1.5;
}

.detailed-timeline__competencies {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.competency-badge {
  display: inline-block;
  padding: 4px 10px;
  font-size: 0.75rem;
  background: rgba(56, 189, 248, 0.2);
  border: 1px solid rgba(56, 189, 248, 0.4);
  border-radius: 12px;
  color: #e5e7eb;
}

/* Diagrama de órbitas */
.orbits-diagram {
  position: relative;
  width: 100%;
  max-width: 500px;
  height: 500px;
  margin: 0 auto;
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: visible;
}

@keyframes orbit-rotate-1 {
  from {
    transform: translate(-50%, -50%) rotate(0deg);
  }
  to {
    transform: translate(-50%, -50%) rotate(360deg);
  }
}

@keyframes orbit-rotate-2 {
  from {
    transform: translate(-50%, -50%) rotate(0deg);
  }
  to {
    transform: translate(-50%, -50%) rotate(-360deg);
  }
}

@keyframes orbit-rotate-3 {
  from {
    transform: translate(-50%, -50%) rotate(0deg);
  }
  to {
    transform: translate(-50%, -50%) rotate(360deg);
  }
}

@keyframes orbit-rotate-4 {
  from {
    transform: translate(-50%, -50%) rotate(0deg);
  }
  to {
    transform: translate(-50%, -50%) rotate(-360deg);
  }
}

.orbits-diagram__center {
  position: absolute;
  width: 120px;
  height: 120px;
  border-radius: 50%;
  background: linear-gradient(135deg, #3b82f6, #8b5cf6);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 5;
  box-shadow: 0 4px 16px rgba(59, 130, 246, 0.4);
}

.orbits-diagram__nucleus {
  text-align: center;
  font-size: 0.85rem;
  font-weight: 600;
  color: #f9fafb;
  padding: 12px;
}

.orbits-diagram__orbit {
  position: absolute;
  border-radius: 50%;
  border: 2px dashed rgba(148, 163, 184, 0.5);
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(15, 23, 42, 0.1);
  transform-origin: center center;
}

.orbit-1 {
  width: 200px;
  height: 200px;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  border-color: rgba(59, 130, 246, 0.6);
  animation: orbit-rotate-1 20s linear infinite;
}

.orbit-2 {
  width: 280px;
  height: 280px;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  border-color: rgba(139, 92, 246, 0.6);
  animation: orbit-rotate-2 30s linear infinite;
}

.orbit-3 {
  width: 360px;
  height: 360px;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  border-color: rgba(236, 72, 153, 0.6);
  animation: orbit-rotate-3 40s linear infinite;
}

.orbit-4 {
  width: 440px;
  height: 440px;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  border-color: rgba(245, 158, 11, 0.6);
  animation: orbit-rotate-4 50s linear infinite;
}

.orbit-label {
  position: absolute;
  top: -12px;
  left: 50%;
  transform: translateX(-50%);
  font-size: 0.75rem;
  font-weight: 700;
  background: rgba(15, 23, 42, 0.95);
  padding: 4px 8px;
  border-radius: 8px;
  color: #f9fafb;
  border: 1px solid rgba(148, 163, 184, 0.3);
  white-space: nowrap;
  z-index: 10;
}

.orbit-content {
  position: absolute;
  top: 20px;
  left: 50%;
  transform: translateX(-50%);
  font-size: 0.8rem;
  text-align: center;
  color: #e5e7eb;
  max-width: 120px;
  line-height: 1.3;
  z-index: 10;
}

/* Asegurar que las etiquetas y contenido roten con sus órbitas */
.orbit-1 .orbit-label,
.orbit-1 .orbit-content {
  animation: orbit-rotate-1 20s linear infinite reverse;
}

.orbit-2 .orbit-label,
.orbit-2 .orbit-content {
  animation: orbit-rotate-2 30s linear infinite reverse;
}

.orbit-3 .orbit-label,
.orbit-3 .orbit-content {
  animation: orbit-rotate-3 40s linear infinite reverse;
}

.orbit-4 .orbit-label,
.orbit-4 .orbit-content {
  animation: orbit-rotate-4 50s linear infinite reverse;
}

/* Evolución metodológica */
.methodology-evolution {
  display: flex;
  align-items: flex-end;
  justify-content: center;
  gap: 24px;
  height: 400px;
  padding: 20px;
}

.methodology-evolution__column {
  flex: 1;
  max-width: 200px;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 12px;
}

.methodology-evolution__header {
  font-size: 1.1rem;
  font-weight: 700;
  color: #020617;
  text-align: center;
}

.section--light .methodology-evolution__header {
  color: #f9fafb;
}

.methodology-evolution__bar {
  width: 100%;
  border-radius: 12px 12px 0 0;
  padding: 16px;
  display: flex;
  flex-direction: column;
  justify-content: flex-start;
  gap: 8px;
  position: relative;
  box-shadow: 0 -4px 12px rgba(0, 0, 0, 0.15);
  transition: transform 0.3s ease;
}

.methodology-evolution__bar:hover {
  transform: scaleY(1.05);
}

.methodology-evolution__label {
  font-size: 0.8rem;
  color: #0b1220;
  font-weight: 500;
  text-align: center;
  line-height: 1.3;
}

.section--light .methodology-evolution__label {
  color: #0b1220;
}

.section--light .radar-chart__legend-item {
  color: #f9fafb;
}

.section--light .radar-chart__svg text {
  fill: #f9fafb !important;
}

.methodology-evolution__icon {
  font-size: 1.2rem;
  text-align: center;
  margin-top: 8px;
}

/* Elementos visuales mejorados */

/* Info box destacado */
.info-box {
  padding: 32px;
  border-radius: 18px;
  background: rgba(15, 23, 42, 0.95);
  border: 2px solid rgba(148, 163, 184, 0.3);
}

.info-box--highlight {
  background: linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(139, 92, 246, 0.1));
  border-color: rgba(59, 130, 246, 0.4);
}

.section--light .info-box {
  background: rgba(255, 255, 255, 0.95);
  border-color: rgba(148, 163, 184, 0.2);
}

.info-box h3 {
  margin-top: 0;
  color: #f9fafb;
}

.section--light .info-box h3 {
  color: #020617;
}

.info-box h4 {
  margin-top: 0;
  margin-bottom: 12px;
  font-size: 1.1rem;
  color: #e5e7eb;
}

.info-box__grid {
  margin-top: 24px;
}

.section--light .info-box h4 {
  color: #020617;
}

/* Competencias: grid de tarjetas con Ver más */
.competences-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 24px;
  list-style: none;
  margin: 0 auto;
  padding: 0;
  max-width: 1200px;
}

.competences-grid .card-competence {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
}

/* Mismo diseño de borde que los 4 principios: borde visible + borde superior acento + sombra */
.section--light .competences-grid .card-competence {
  border: 1px solid rgba(41, 51, 69, 0.25);
  border-top: 3px solid var(--accent-light);
  border-radius: 18px;
  background: rgba(255, 255, 255, 0.98);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.06);
}

.section--light .competences-grid .card-competence:hover {
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12);
}

.competence-icon-wrap {
  margin-bottom: 12px;
}

.competence-icon {
  font-size: 1.5rem;
  color: #970036;
}

.section--light .competence-icon {
  color: var(--accent-light);
}

.competence-name {
  margin: 0 0 10px;
  font-size: 1.1rem;
  font-weight: 600;
  color: inherit;
}

.competence-age {
  margin: 0 0 12px;
  font-size: 0.85rem;
  font-weight: 500;
  color: inherit;
  opacity: 0.9;
}

.competence-list {
  margin: 0;
  padding-left: 1.1rem;
  list-style: disc;
  font-size: 0.9rem;
  line-height: 1.6;
  color: inherit;
  flex: 1;
}

.competence-list li {
  margin-bottom: 8px;
}

.competence-list li:last-child {
  margin-bottom: 0;
}

.section--light .competence-list {
  color: #374151;
}

.competence-btn {
  margin-top: auto;
  padding: 8px 14px;
  font-size: 0.9rem;
  font-weight: 500;
  color: #970036;
  background: transparent;
  border: 1px solid rgba(151, 0, 54, 0.5);
  border-radius: 999px;
  cursor: pointer;
  transition: background 0.2s ease, color 0.2s ease, border-color 0.2s ease;
}

.competence-btn:hover {
  background: rgba(151, 0, 54, 0.15);
  border-color: #970036;
}

.section--light .competence-btn:hover {
  background: rgba(41, 51, 69, 0.15);
  border-color: var(--accent-light);
}

.section--light .competence-btn {
  color: var(--accent-light);
  border-color: rgba(41, 51, 69, 0.5);
}

.section--light .competence-btn[aria-expanded="true"] {
  background: rgba(41, 51, 69, 0.2);
  border-color: var(--accent-light);
}

.competence-btn[aria-expanded="true"] {
  background: rgba(151, 0, 54, 0.2);
  border-color: #970036;
}

.competence-detail {
  margin-top: 14px;
  padding-top: 14px;
  border-top: 1px solid rgba(250, 250, 247, 0.15);
  font-size: 0.95rem;
  line-height: 1.65;
  color: #e8e8e4;
}

.section--light .competence-detail {
  border-top-color: rgba(41, 51, 69, 0.15);
  color: #374151;
}

.competence-page-link {
  display: inline-block;
  margin-top: 12px;
  font-size: 0.9rem;
  font-weight: 500;
  color: #970036;
  text-decoration: none;
}

.competence-page-link:hover {
  text-decoration: underline;
}

.section--light .competence-page-link {
  color: var(--accent-light);
}

.section--light .competence-page-link:hover {
  color: var(--accent-light);
}

/* Diagrama de competencias */
.competencies-diagram {
  position: relative;
  padding: 60px 40px;
  background: rgba(15, 23, 42, 0.6);
  border-radius: 24px;
  border: 2px solid rgba(148, 163, 184, 0.2);
}

.section--light .competencies-diagram {
  background: rgba(249, 250, 251, 0.8);
  border-color: rgba(148, 163, 184, 0.3);
}

.competencies-diagram__center {
  text-align: center;
  margin-bottom: 40px;
}

.competencies-diagram__center h3 {
  margin: 0 0 8px;
  font-size: 1.5rem;
  color: #f9fafb;
}

.section--light .competencies-diagram__center h3 {
  color: #020617;
}

.competencies-diagram__ring {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 24px;
  max-width: 800px;
  margin: 0 auto;
}

.competency-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8px;
  padding: 20px;
  background: rgba(15, 23, 42, 0.8);
  border-radius: 16px;
  border: 2px solid rgba(148, 163, 184, 0.3);
  transition: transform 0.3s ease, border-color 0.3s ease;
}

.competency-item:hover {
  transform: translateY(-4px);
  border-color: rgba(59, 130, 246, 0.6);
}

.section--light .competency-item {
  background: rgba(255, 255, 255, 0.9);
}

.competency-item__icon {
  font-size: 2rem;
  line-height: 1;
  color: #3b82f6;
}

.competency-item__icon i {
  font-size: 2rem;
}

.competency-item__name {
  font-size: 0.9rem;
  font-weight: 600;
  text-align: center;
  color: #e5e7eb;
}

.section--light .competency-item__name {
  color: #020617;
}

/* Flujo de la guía */
.guide-structure {
  padding: 40px;
  background: rgba(15, 23, 42, 0.6);
  border-radius: 24px;
  border: 2px solid rgba(148, 163, 184, 0.2);
}

.section--light .guide-structure {
  background: rgba(249, 250, 251, 0.8);
  border-color: rgba(148, 163, 184, 0.3);
}

.guide-flow {
  display: flex;
  align-items: center;
  justify-content: center;
  flex-wrap: wrap;
  gap: 16px;
  margin-top: 32px;
}

.guide-flow__step {
  flex: 1;
  min-width: 140px;
  max-width: 180px;
  padding: 24px 16px;
  background: rgba(15, 23, 42, 0.9);
  border-radius: 16px;
  border: 2px solid rgba(148, 163, 184, 0.3);
  text-align: center;
  transition: transform 0.3s ease, border-color 0.3s ease;
}

.guide-flow__step:hover {
  transform: translateY(-4px);
  border-color: rgba(59, 130, 246, 0.6);
}

.section--light .guide-flow__step {
  background: rgba(255, 255, 255, 0.95);
}

.guide-flow__number {
  width: 48px;
  height: 48px;
  margin: 0 auto 12px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
  background: linear-gradient(135deg, #3b82f6, #8b5cf6);
  color: #f9fafb;
  font-size: 1.2rem;
  font-weight: 700;
}

.guide-flow__number i {
  font-size: 1.2rem;
}

.guide-flow__arrow {
  font-size: 1.4rem;
  color: #3b82f6;
  flex-shrink: 0;
  display: flex;
  align-items: center;
  font-weight: 700;
  opacity: 0.9;
}

.section--light .guide-flow__arrow {
  color: #2563eb;
}

.guide-flow__arrow i {
  font-size: 1rem;
}

.guide-flow__step h4 {
  margin: 0 0 8px;
  font-size: 1.1rem;
  color: #f9fafb;
}

.section--light .guide-flow__step h4 {
  color: #020617;
}

.guide-flow__step p {
  margin: 0;
  font-size: 0.85rem;
  opacity: 0.9;
  color: #e5e7eb;
}

.section--light .guide-flow__step p {
  color: #020617;
}

.guide-flow__arrow {
  font-size: 1.5rem;
  color: #94a3b8;
  flex-shrink: 0;
}

/* Performance levels */
.performance-levels {
  padding: 40px;
  background: rgba(15, 23, 42, 0.6);
  border-radius: 24px;
  border: 2px solid rgba(148, 163, 184, 0.2);
}

.section--light .performance-levels {
  background: rgba(249, 250, 251, 0.8);
  border-color: rgba(148, 163, 184, 0.3);
}

.performance-levels h3 {
  color: #f9fafb;
}

.section--light .performance-levels h3 {
  color: #020617;
}

.performance-levels p {
  color: #e5e7eb;
}

.section--light .performance-levels p {
  color: #020617;
}

/* Páginas por etapa */

.stage-hero {
  padding: 100px 20px 60px;
  background:
    radial-gradient(circle at top right, rgba(56, 189, 248, 0.25), transparent 45%),
    radial-gradient(circle at top left, rgba(168, 85, 247, 0.2), transparent 50%),
    #0b1220;
  color: #f9fafb;
  scroll-margin-top: 80px;
}

.stage-hero__content {
  max-width: 1100px;
  margin: 24px auto 0;
  display: grid;
  grid-template-columns: minmax(0, 1.2fr) minmax(0, 0.8fr);
  gap: 24px;
  align-items: start;
}

.stage-hero__title-wrap {
  display: flex;
  align-items: center;
  gap: 16px;
  flex-wrap: wrap;
  margin-bottom: 4px;
}

.stage-hero__content h1 {
  margin: 0;
  font-size: clamp(2rem, 2vw + 1.4rem, 2.6rem);
}

.stage-hero__icon {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 56px;
  height: 56px;
  border-radius: 50%;
  background: rgba(250, 250, 247, 0.15);
  color: rgba(250, 250, 247, 0.95);
  font-size: 1.75rem;
  flex-shrink: 0;
}

.stage-hero__content p {
  margin: 0;
  max-width: 560px;
  opacity: 0.9;
}

.stage-hero__card {
  background: rgba(15, 23, 42, 0.9);
  border: 1px solid rgba(148, 163, 184, 0.6);
  border-radius: 18px;
  padding: 16px;
}

.stage-hero__card h3 {
  margin: 0 0 10px;
  font-size: 1rem;
}

.stage-hero__card ul {
  margin: 0;
  padding-left: 1.1rem;
  font-size: 0.9rem;
}

/* Páginas por competencia */

.competence-hero {
  padding: 100px 20px 60px;
  background:
    radial-gradient(circle at top right, rgba(151, 0, 54, 0.25), transparent 45%),
    radial-gradient(circle at top left, rgba(41, 51, 69, 0.5), transparent 50%),
    #293345;
  color: #fafaf7;
  scroll-margin-top: 80px;
}

.competence-hero__content {
  max-width: 720px;
  margin: 0 auto;
}

.competence-hero__content .pill--accent {
  background: linear-gradient(135deg, #970036, #7a002b);
  color: #fafaf7;
}

.competence-hero__title-wrap {
  display: flex;
  align-items: center;
  gap: 16px;
  flex-wrap: wrap;
  margin-bottom: 16px;
}

.competence-hero__content h1 {
  margin: 0;
  font-size: clamp(1.75rem, 2vw + 1.2rem, 2.4rem);
}

.competence-hero__icon {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 56px;
  height: 56px;
  border-radius: 50%;
  background: rgba(151, 0, 54, 0.4);
  color: #fafaf7;
  font-size: 1.75rem;
  flex-shrink: 0;
}

.competence-hero__desc {
  margin: 0 0 24px;
  font-size: 1.05rem;
  line-height: 1.6;
  opacity: 0.95;
}

.competence-hero .btn--ghost:hover {
  border-color: #970036;
  color: #fafaf7;
}

.stage-cards {
  list-style: none;
  margin: 0;
  padding: 0;
  display: grid;
  gap: 20px;
}

.stage-cards--competence {
  grid-template-columns: repeat(3, 1fr);
  max-width: 900px;
  margin: 0 auto;
}

@media (max-width: 768px) {
  .stage-cards--competence {
    grid-template-columns: repeat(2, 1fr);
  }
}

@media (max-width: 480px) {
  .stage-cards--competence {
    grid-template-columns: 1fr;
  }
}

/* Subcompetencias y camino (trazabilidad) en páginas de competencia */

.subcompetencias-section {
  margin-bottom: 48px;
}

.subcompetencias-section .section__header {
  margin-bottom: 20px;
}

.subcompetencias-list {
  list-style: none;
  margin: 0;
  padding: 0;
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  max-width: 800px;
  margin-left: auto;
  margin-right: auto;
  justify-content: center;
}

.subcompetencias-list li {
  display: inline-flex;
  align-items: center;
  padding: 8px 16px;
  border-radius: 999px;
  background: rgba(41, 51, 69, 0.12);
  color: #293345;
  font-size: 0.9rem;
  font-weight: 600;
}

.section--light .subcompetencias-list li {
  background: rgba(151, 0, 54, 0.08);
  color: #5a0828;
}

/* Camino / trazabilidad: timeline vertical */
.camino-section {
  margin-top: 48px;
}

.camino-section .section__header {
  margin-bottom: 32px;
}

.camino-timeline {
  list-style: none;
  margin: 0;
  padding: 0;
  max-width: 720px;
  margin-left: auto;
  margin-right: auto;
  position: relative;
}

.camino-timeline::before {
  content: "";
  position: absolute;
  left: 27px;
  top: 0;
  bottom: 0;
  width: 3px;
  background: linear-gradient(180deg, #5FAFA8 0%, #E3C34A 20%, #6E8FAF 40%, #E17A55 60%, #E17A55 80%, #8C7CB8 100%);
  border-radius: 3px;
  opacity: 0.6;
}

.camino-stage {
  position: relative;
  padding-left: 72px;
  padding-bottom: 40px;
}

.camino-stage:last-child {
  padding-bottom: 0;
}

.camino-stage__node {
  position: absolute;
  left: 0;
  top: 4px;
  width: 56px;
  height: 56px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.4rem;
  color: #fff;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
  z-index: 1;
}

.camino-stage--raiz .camino-stage__node { background: linear-gradient(135deg, #5FAFA8, #4a8f89); }
.camino-stage--tallo .camino-stage__node { background: linear-gradient(135deg, #E3C34A, #c9a83d); }
.camino-stage--nudo .camino-stage__node { background: linear-gradient(135deg, #6E8FAF, #5a7594); }
.camino-stage--rama .camino-stage__node { background: linear-gradient(135deg, #E17A55, #c96844); }
.camino-stage--flor .camino-stage__node { background: linear-gradient(135deg, #E17A55, #c96844); }
.camino-stage--fruto .camino-stage__node { background: linear-gradient(135deg, #8C7CB8, #6e6096); }

.camino-stage__title {
  margin: 0 0 12px;
  font-size: 1.15rem;
  font-weight: 700;
  color: #1a1525;
  display: flex;
  align-items: center;
  gap: 8px;
}

.camino-stage__age {
  font-size: 0.85rem;
  font-weight: 600;
  opacity: 0.85;
}

.camino-stage__expectativas {
  list-style: none;
  margin: 0;
  padding: 0;
}

.camino-stage__expectativas li {
  position: relative;
  padding-left: 1rem;
  margin-bottom: 8px;
  font-size: 0.95rem;
  line-height: 1.55;
  color: #374151;
}

.camino-stage__expectativas li::before {
  content: "▸";
  position: absolute;
  left: 0;
  color: #970036;
  font-weight: 600;
}

.camino-stage__expectativas li strong {
  color: #293345;
}

@media (max-width: 640px) {
  .camino-timeline::before {
    left: 19px;
  }
  .camino-stage {
    padding-left: 56px;
  }
  .camino-stage__node {
    width: 44px;
    height: 44px;
    font-size: 1.1rem;
  }
}

/* Paletas de colores por etapa - Colores exactos de los flyers */

/* Escuelita - Verde esmeralda (#10b981) */
/* Escuelita = verde agua #C8E4E2 / #5FAFA8 */
.stage-hero--escuelita {
  background:
    radial-gradient(circle at top left, rgba(95, 175, 168, 0.35), transparent 50%),
    radial-gradient(circle at bottom right, rgba(95, 175, 168, 0.2), transparent 50%),
    #0b1220;
}

.stage-hero--escuelita .pill--accent {
  background: linear-gradient(135deg, #5FAFA8, #4a8f89);
  color: #f9fafb;
}

.stage-hero--escuelita .card--feature {
  border-top-color: #5FAFA8;
}

.stage-hero--escuelita .card--usecase {
  border-top-color: #5FAFA8;
}

.stage-hero--escuelita .btn--ghost:hover {
  border-color: #5FAFA8;
  color: #5FAFA8;
}

/* Infantil = amarillo/crema #F7E8B8 / #E3C34A */
.stage-hero--infantil {
  background:
    radial-gradient(circle at top left, rgba(227, 195, 74, 0.35), transparent 50%),
    radial-gradient(circle at bottom right, rgba(227, 195, 74, 0.15), transparent 50%),
    #0b1220;
}

.stage-hero--infantil .pill--accent {
  background: linear-gradient(135deg, #E3C34A, #c9a82a);
  color: #151b26;
}

.stage-hero--infantil .card--feature {
  border-top-color: #E3C34A;
}

.stage-hero--infantil .card--usecase {
  border-top-color: #E3C34A;
}

.stage-hero--infantil .btn--ghost:hover {
  border-color: #E3C34A;
  color: #E3C34A;
}

/* Primaria - Azul (#3b82f6) */
.stage-hero--primaria {
  background:
    radial-gradient(circle at top left, rgba(59, 130, 246, 0.35), transparent 50%),
    radial-gradient(circle at bottom right, rgba(41, 51, 69, 0.2), transparent 50%),
    #0b1220;
}

.stage-hero--primaria .pill--accent {
  background: linear-gradient(135deg, #3b82f6, #2563eb);
  color: #f9fafb;
}

.stage-hero--primaria .card--feature {
  border-top-color: #3b82f6;
}

.stage-hero--primaria .card--usecase {
  border-top-color: #3b82f6;
}

.stage-hero--primaria .btn--ghost:hover {
  border-color: #3b82f6;
  color: #3b82f6;
}

/* ESO - Naranja (#f97316) - Secundaria */
.stage-hero--eso {
  background:
    radial-gradient(circle at top left, rgba(249, 115, 22, 0.35), transparent 50%),
    radial-gradient(circle at bottom right, rgba(234, 88, 12, 0.2), transparent 50%),
    #0b1220;
}

.stage-hero--eso .pill--accent {
  background: linear-gradient(135deg, #f97316, #ea580c);
  color: #0b1220;
}

.stage-hero--eso .card--feature {
  border-top-color: #f97316;
}

.stage-hero--eso .card--usecase {
  border-top-color: #f97316;
}

.stage-hero--eso .btn--ghost:hover {
  border-color: #f97316;
  color: #f97316;
}

/* Bachillerato - Mismo color que ESO (#f97316) - Secundaria */
.stage-hero--bachillerato {
  background:
    radial-gradient(circle at top left, rgba(249, 115, 22, 0.35), transparent 50%),
    radial-gradient(circle at bottom right, rgba(234, 88, 12, 0.2), transparent 50%),
    #0b1220;
}

.stage-hero--bachillerato .pill--accent {
  background: linear-gradient(135deg, #f97316, #ea580c);
  color: #0b1220;
}

.stage-hero--bachillerato .card--feature {
  border-top-color: #f97316;
}

.stage-hero--bachillerato .card--usecase {
  border-top-color: #f97316;
}

.stage-hero--bachillerato .btn--ghost:hover {
  border-color: #f97316;
  color: #f97316;
}

/* FP - Púrpura/Violeta (#8b5cf6) */
.stage-hero--fp {
  background:
    radial-gradient(circle at top left, rgba(139, 92, 246, 0.35), transparent 50%),
    radial-gradient(circle at bottom right, rgba(124, 58, 237, 0.2), transparent 50%),
    #0b1220;
}

.stage-hero--fp .pill--accent {
  background: linear-gradient(135deg, #8b5cf6, #7c3aed);
  color: #f9fafb;
}

.stage-hero--fp .card--feature {
  border-top-color: #8b5cf6;
}

.stage-hero--fp .card--usecase {
  border-top-color: #8b5cf6;
}

.stage-hero--fp .btn--ghost:hover {
  border-color: #8b5cf6;
  color: #8b5cf6;
}

/* Páginas de metáfora (Raíz, Tallo, Nudo, Rama, Flor, Fruto) – colores paleta index */
.stage-hero--raiz {
  background:
    radial-gradient(circle at top left, rgba(95, 175, 168, 0.35), transparent 50%),
    radial-gradient(circle at bottom right, rgba(95, 175, 168, 0.2), transparent 50%),
    #0b1220;
}
.stage-hero--raiz .pill--accent { background: linear-gradient(135deg, #5FAFA8, #4a8f89); color: #f9fafb; }
.stage-hero--raiz .stage-hero__icon {
  background: rgba(95, 175, 168, 0.35);
  color: #c8e8e6;
}
.stage-hero--raiz .card--feature, .stage-hero--raiz .card--usecase { border-top-color: #5FAFA8; }
.stage-hero--raiz .btn--ghost:hover { border-color: #5FAFA8; color: #5FAFA8; }

.stage-hero--tallo {
  background:
    radial-gradient(circle at top left, rgba(227, 195, 74, 0.35), transparent 50%),
    radial-gradient(circle at bottom right, rgba(227, 195, 74, 0.15), transparent 50%),
    #0b1220;
}
.stage-hero--tallo .pill--accent { background: linear-gradient(135deg, #E3C34A, #c9a82a); color: #151b26; }
.stage-hero--tallo .card--feature, .stage-hero--tallo .card--usecase { border-top-color: #E3C34A; }
.stage-hero--tallo .btn--ghost:hover { border-color: #E3C34A; color: #E3C34A; }

.stage-hero--nudo {
  background:
    radial-gradient(circle at top left, rgba(110, 143, 175, 0.35), transparent 50%),
    radial-gradient(circle at bottom right, rgba(110, 143, 175, 0.2), transparent 50%),
    #0b1220;
}
.stage-hero--nudo .pill--accent { background: linear-gradient(135deg, #6E8FAF, #5a7399); color: #f9fafb; }
.stage-hero--nudo .card--feature, .stage-hero--nudo .card--usecase { border-top-color: #6E8FAF; }
.stage-hero--nudo .btn--ghost:hover { border-color: #6E8FAF; color: #6E8FAF; }

.stage-hero--rama {
  background:
    radial-gradient(circle at top left, rgba(225, 122, 85, 0.35), transparent 50%),
    radial-gradient(circle at bottom right, rgba(225, 122, 85, 0.2), transparent 50%),
    #0b1220;
}
.stage-hero--rama .pill--accent { background: linear-gradient(135deg, #E17A55, #c96844); color: #f9fafb; }
.stage-hero--rama .card--feature, .stage-hero--rama .card--usecase { border-top-color: #E17A55; }
.stage-hero--rama .btn--ghost:hover { border-color: #E17A55; color: #E17A55; }

.stage-hero--flor {
  background:
    radial-gradient(circle at top left, rgba(225, 122, 85, 0.35), transparent 50%),
    radial-gradient(circle at bottom right, rgba(225, 122, 85, 0.2), transparent 50%),
    #0b1220;
}
.stage-hero--flor .pill--accent { background: linear-gradient(135deg, #E17A55, #c96844); color: #f9fafb; }
.stage-hero--flor .card--feature, .stage-hero--flor .card--usecase { border-top-color: #E17A55; }
.stage-hero--flor .btn--ghost:hover { border-color: #E17A55; color: #E17A55; }

.stage-hero--fruto {
  background:
    radial-gradient(circle at top left, rgba(140, 124, 184, 0.35), transparent 50%),
    radial-gradient(circle at bottom right, rgba(140, 124, 184, 0.2), transparent 50%),
    #0b1220;
}
.stage-hero--fruto .pill--accent { background: linear-gradient(135deg, #8C7CB8, #6e6096); color: #f9fafb; }
.stage-hero--fruto .stage-hero__icon {
  background: rgba(140, 124, 184, 0.35);
  color: #e8e0f5;
}
.stage-hero--fruto .card--feature, .stage-hero--fruto .card--usecase { border-top-color: #8C7CB8; }
.stage-hero--fruto .btn--ghost:hover { border-color: #8C7CB8; color: #8C7CB8; }

/* body.etapa-* para páginas de metáfora (cards en section--light) */
body.etapa-raiz .section--light .card--feature,
body.etapa-raiz .section--light .card--usecase { border-top-color: #5FAFA8; }
body.etapa-raiz .card--feature:hover,
body.etapa-raiz .card--usecase:hover { border-color: #5FAFA8; background: radial-gradient(circle at top left, rgba(95, 175, 168, 0.15), #020617); }

/* Raíz: Horizonte de expectativas y Competencias (mismo patrón que Fruto, colores #5FAFA8 / #C8E4E2) */
body.etapa-raiz .section--raiz-horizonte {
  background: #C8E4E2;
  color: #1a1525;
}
body.etapa-raiz .section--raiz-horizonte .section__header h2,
body.etapa-raiz .section--raiz-horizonte .section__header p { color: #1a1525; }
body.etapa-raiz .section--raiz-horizonte .horizonte-phase { font-weight: 600; font-size: 1rem; color: #2d6b67; margin: 0 0 8px; }
body.etapa-raiz .section--raiz-horizonte .horizonte-intro { font-size: 1.1rem; font-weight: 600; color: #2d2438; margin: 0 0 32px; max-width: 640px; margin-left: auto; margin-right: auto; }
body.etapa-raiz .section--raiz-horizonte .horizonte-aspiraciones { list-style: none; margin: 0; padding: 0; max-width: 900px; margin-left: auto; margin-right: auto; display: grid; gap: 20px; }
body.etapa-raiz .section--raiz-horizonte .horizonte-item {
  display: grid; grid-template-columns: auto auto 1fr; gap: 20px; align-items: start;
  background: rgba(255, 255, 255, 0.9); border-radius: 16px; padding: 24px 24px 24px 20px;
  border-left: 4px solid #5FAFA8; box-shadow: 0 4px 16px rgba(95, 175, 168, 0.15);
  transition: transform 0.25s ease, box-shadow 0.25s ease;
}
body.etapa-raiz .section--raiz-horizonte .horizonte-item:hover {
  transform: translateX(4px); box-shadow: 0 8px 24px rgba(95, 175, 168, 0.25);
}
body.etapa-raiz .section--raiz-horizonte .horizonte-item__num {
  display: flex; align-items: center; justify-content: center; width: 44px; height: 44px; border-radius: 50%;
  background: linear-gradient(135deg, #5FAFA8, #4a8f89); color: #fff; font-size: 1.25rem; font-weight: 700; flex-shrink: 0;
}
body.etapa-raiz .section--raiz-horizonte .horizonte-item__icon-wrap {
  display: flex; align-items: center; justify-content: center; width: 48px; height: 48px; border-radius: 12px;
  background: rgba(95, 175, 168, 0.2); color: #5FAFA8; font-size: 1.35rem; flex-shrink: 0;
}
body.etapa-raiz .section--raiz-horizonte .horizonte-item__content { min-width: 0; }
body.etapa-raiz .section--raiz-horizonte .horizonte-item__title { margin: 0 0 8px; font-size: 1.1rem; font-weight: 700; color: #2d2438; }
body.etapa-raiz .section--raiz-horizonte .horizonte-item__text { margin: 0; font-size: 0.95rem; line-height: 1.55; color: #4b5563; }
body.etapa-raiz .section--raiz-horizonte .section__header--with-icon,
body.etapa-raiz .section--raiz-competences .section__header--with-icon {
  display: flex; flex-direction: column; align-items: center; gap: 12px;
}
body.etapa-raiz .section--raiz-horizonte .section__header-icon {
  display: inline-flex; align-items: center; justify-content: center; width: 72px; height: 72px; border-radius: 50%;
  background: rgba(95, 175, 168, 0.4); color: #2d6b67; font-size: 2.25rem; margin-bottom: 8px;
  box-shadow: 0 4px 20px rgba(95, 175, 168, 0.3);
}
@media (max-width: 640px) {
  body.etapa-raiz .section--raiz-horizonte .horizonte-item { grid-template-columns: 1fr; grid-template-rows: auto auto auto; gap: 14px; }
  body.etapa-raiz .section--raiz-horizonte .horizonte-item__num { grid-row: 1; }
  body.etapa-raiz .section--raiz-horizonte .horizonte-item__icon-wrap { grid-row: 2; }
  body.etapa-raiz .section--raiz-horizonte .horizonte-item__content { grid-row: 3; }
}

body.etapa-raiz .section--raiz-competences { background: #C8E4E2; color: #1a1525; }
body.etapa-raiz .section--raiz-competences .section__header h2,
body.etapa-raiz .section--raiz-competences .section__header p { color: #1a1525; }
body.etapa-raiz .section--raiz-competences .section__header-icon {
  background: rgba(95, 175, 168, 0.4); color: #2d6b67; box-shadow: 0 4px 20px rgba(95, 175, 168, 0.3);
}
body.etapa-raiz .section--raiz-competences .competences-grid--dynamic { gap: 24px; }
body.etapa-raiz .section--raiz-competences .competences-grid--dynamic .card-competence {
  background: #fff; border: none; border-radius: 20px; padding: 28px 26px;
  box-shadow: 0 4px 20px rgba(95, 175, 168, 0.12);
  transition: transform 0.25s ease, box-shadow 0.25s ease;
  display: flex; flex-direction: column; align-items: flex-start;
}
body.etapa-raiz .section--raiz-competences .competences-grid--dynamic .card-competence:hover {
  transform: translateY(-4px); box-shadow: 0 12px 28px rgba(95, 175, 168, 0.18);
}
/* Bloque icono: cuadrado redondeado grande (estilo imagen) */
body.etapa-raiz .section--raiz-competences .competences-grid--dynamic .competence-icon-wrap {
  width: 70px; height: 70px; border-radius: 18px;
  background: #C8E4E2; display: flex; align-items: center; justify-content: center;
  margin-bottom: 14px;
}
body.etapa-raiz .section--raiz-competences .competences-grid--dynamic .competence-icon {
  color: #5FAFA8; font-size: 1.75rem;
}
/* Pill de edad: mismo tono claro, texto oscuro centrado */
body.etapa-raiz .section--raiz-competences .competence-badge {
  display: inline-block; padding: 6px 14px; border-radius: 999px;
  background: #C8E4E2; color: #1a1525; font-size: 0.8rem; font-weight: 600;
  letter-spacing: 0.02em; margin-bottom: 12px; text-align: center;
}
body.etapa-raiz .section--raiz-competences .competence-teaser {
  color: #4b5563; font-size: 0.95rem; line-height: 1.55; margin: 0 0 16px;
}
body.etapa-raiz .section--raiz-competences .competences-grid--dynamic .competence-name {
  color: #1a1525; font-size: 1.25rem; font-weight: 700; margin: 0 0 8px;
}
body.etapa-raiz .section--raiz-competences .competence-btn {
  border-color: rgba(95, 175, 168, 0.6); color: #5FAFA8; background: rgba(255, 255, 255, 0.8);
}
body.etapa-raiz .section--raiz-competences .competence-btn:hover {
  background: rgba(95, 175, 168, 0.2); border-color: #5FAFA8; color: #2d6b67;
}
body.etapa-raiz .section--raiz-competences .competence-detail { border-top-color: rgba(95, 175, 168, 0.25); }
body.etapa-raiz .section--raiz-competences .competence-list strong { color: #2d6b67; }

body.etapa-tallo .section--light .card--feature,
body.etapa-tallo .section--light .card--usecase { border-top-color: #E3C34A; }
body.etapa-tallo .card--feature:hover,
body.etapa-tallo .card--usecase:hover { border-color: #E3C34A; background: radial-gradient(circle at top left, rgba(227, 195, 74, 0.2), #020617); }

body.etapa-nudo .section--light .card--feature,
body.etapa-nudo .section--light .card--usecase { border-top-color: #6E8FAF; }
body.etapa-nudo .card--feature:hover,
body.etapa-nudo .card--usecase:hover { border-color: #6E8FAF; background: radial-gradient(circle at top left, rgba(110, 143, 175, 0.2), #020617); }

/* Tallo: Horizonte de expectativas y Competencias (#E3C34A / #F7E8B8) */
body.etapa-tallo .section--tallo-horizonte {
  background: #F7E8B8;
  color: #1a1525;
}
body.etapa-tallo .section--tallo-horizonte .section__header h2,
body.etapa-tallo .section--tallo-horizonte .section__header p { color: #1a1525; }
body.etapa-tallo .section--tallo-horizonte .horizonte-phase { font-weight: 600; font-size: 1rem; color: #6b5a1f; margin: 0 0 8px; }
body.etapa-tallo .section--tallo-horizonte .horizonte-intro { font-size: 1.1rem; font-weight: 600; color: #2d2438; margin: 0 0 32px; max-width: 640px; margin-left: auto; margin-right: auto; }
body.etapa-tallo .section--tallo-horizonte .horizonte-aspiraciones { list-style: none; margin: 0; padding: 0; max-width: 900px; margin-left: auto; margin-right: auto; display: grid; gap: 20px; }
body.etapa-tallo .section--tallo-horizonte .horizonte-item {
  display: grid; grid-template-columns: auto auto 1fr; gap: 20px; align-items: start;
  background: rgba(255, 255, 255, 0.9); border-radius: 16px; padding: 24px 24px 24px 20px;
  border-left: 4px solid #E3C34A; box-shadow: 0 4px 16px rgba(227, 195, 74, 0.2);
  transition: transform 0.25s ease, box-shadow 0.25s ease;
}
body.etapa-tallo .section--tallo-horizonte .horizonte-item:hover {
  transform: translateX(4px); box-shadow: 0 8px 24px rgba(227, 195, 74, 0.3);
}
body.etapa-tallo .section--tallo-horizonte .horizonte-item__num {
  display: flex; align-items: center; justify-content: center; width: 44px; height: 44px; border-radius: 50%;
  background: linear-gradient(135deg, #E3C34A, #c9a83d); color: #1a1525; font-size: 1.25rem; font-weight: 700; flex-shrink: 0;
}
body.etapa-tallo .section--tallo-horizonte .horizonte-item__icon-wrap {
  display: flex; align-items: center; justify-content: center; width: 48px; height: 48px; border-radius: 12px;
  background: rgba(227, 195, 74, 0.25); color: #8b7324; font-size: 1.35rem; flex-shrink: 0;
}
body.etapa-tallo .section--tallo-horizonte .horizonte-item__content { min-width: 0; }
body.etapa-tallo .section--tallo-horizonte .horizonte-item__title { margin: 0 0 8px; font-size: 1.1rem; font-weight: 700; color: #2d2438; }
body.etapa-tallo .section--tallo-horizonte .horizonte-item__text { margin: 0; font-size: 0.95rem; line-height: 1.55; color: #4b5563; }
body.etapa-tallo .section--tallo-horizonte .section__header--with-icon,
body.etapa-tallo .section--tallo-competences .section__header--with-icon {
  display: flex; flex-direction: column; align-items: center; gap: 12px;
}
body.etapa-tallo .section--tallo-horizonte .section__header-icon {
  display: inline-flex; align-items: center; justify-content: center; width: 72px; height: 72px; border-radius: 50%;
  background: rgba(227, 195, 74, 0.45); color: #6b5a1f; font-size: 2.25rem; margin-bottom: 8px;
  box-shadow: 0 4px 20px rgba(227, 195, 74, 0.35);
}
@media (max-width: 640px) {
  body.etapa-tallo .section--tallo-horizonte .horizonte-item { grid-template-columns: 1fr; grid-template-rows: auto auto auto; gap: 14px; }
  body.etapa-tallo .section--tallo-horizonte .horizonte-item__num { grid-row: 1; }
  body.etapa-tallo .section--tallo-horizonte .horizonte-item__icon-wrap { grid-row: 2; }
  body.etapa-tallo .section--tallo-horizonte .horizonte-item__content { grid-row: 3; }
}
body.etapa-tallo .section--tallo-competences { background: #F7E8B8; color: #1a1525; }
body.etapa-tallo .section--tallo-competences .section__header h2,
body.etapa-tallo .section--tallo-competences .section__header p { color: #1a1525; }
body.etapa-tallo .section--tallo-competences .section__header-icon {
  background: rgba(227, 195, 74, 0.45); color: #6b5a1f; box-shadow: 0 4px 20px rgba(227, 195, 74, 0.35);
}
body.etapa-tallo .section--tallo-competences .competences-grid--dynamic { gap: 24px; }
body.etapa-tallo .section--tallo-competences .competences-grid--dynamic .card-competence {
  background: #fff; border: none; border-radius: 20px; padding: 28px 26px;
  box-shadow: 0 4px 20px rgba(227, 195, 74, 0.12);
  transition: transform 0.25s ease, box-shadow 0.25s ease;
  display: flex; flex-direction: column; align-items: flex-start;
}
body.etapa-tallo .section--tallo-competences .competences-grid--dynamic .card-competence:hover {
  transform: translateY(-4px); box-shadow: 0 12px 28px rgba(227, 195, 74, 0.2);
}
body.etapa-tallo .section--tallo-competences .competences-grid--dynamic .competence-icon-wrap {
  width: 70px; height: 70px; border-radius: 18px;
  background: #F7E8B8; display: flex; align-items: center; justify-content: center;
  margin-bottom: 14px;
}
body.etapa-tallo .section--tallo-competences .competences-grid--dynamic .competence-icon {
  color: #E3C34A; font-size: 1.75rem;
}
body.etapa-tallo .section--tallo-competences .competence-badge {
  display: inline-block; padding: 6px 14px; border-radius: 999px;
  background: #F7E8B8; color: #1a1525; font-size: 0.8rem; font-weight: 600;
  letter-spacing: 0.02em; margin-bottom: 12px; text-align: center;
}
body.etapa-tallo .section--tallo-competences .competence-teaser {
  color: #4b5563; font-size: 0.95rem; line-height: 1.55; margin: 0 0 16px;
}
body.etapa-tallo .section--tallo-competences .competences-grid--dynamic .competence-name {
  color: #1a1525; font-size: 1.25rem; font-weight: 700; margin: 0 0 8px;
}
body.etapa-tallo .section--tallo-competences .competence-btn {
  border-color: rgba(227, 195, 74, 0.6); color: #8b7324; background: rgba(255, 255, 255, 0.8);
}
body.etapa-tallo .section--tallo-competences .competence-btn:hover {
  background: rgba(227, 195, 74, 0.2); border-color: #E3C34A; color: #6b5a1f;
}
body.etapa-tallo .section--tallo-competences .competence-detail { border-top-color: rgba(227, 195, 74, 0.25); }
body.etapa-tallo .section--tallo-competences .competence-list strong { color: #6b5a1f; }

/* Nudo: Horizonte de expectativas y Competencias (#6E8FAF / #C7D6E2) */
body.etapa-nudo .section--nudo-horizonte {
  background: #C7D6E2;
  color: #1a1525;
}
body.etapa-nudo .section--nudo-horizonte .section__header h2,
body.etapa-nudo .section--nudo-horizonte .section__header p { color: #1a1525; }
body.etapa-nudo .section--nudo-horizonte .horizonte-phase { font-weight: 600; font-size: 1rem; color: #3d5a75; margin: 0 0 8px; }
body.etapa-nudo .section--nudo-horizonte .horizonte-intro { font-size: 1.1rem; font-weight: 600; color: #2d2438; margin: 0 0 32px; max-width: 640px; margin-left: auto; margin-right: auto; }
body.etapa-nudo .section--nudo-horizonte .horizonte-aspiraciones { list-style: none; margin: 0; padding: 0; max-width: 900px; margin-left: auto; margin-right: auto; display: grid; gap: 20px; }
body.etapa-nudo .section--nudo-horizonte .horizonte-item {
  display: grid; grid-template-columns: auto auto 1fr; gap: 20px; align-items: start;
  background: rgba(255, 255, 255, 0.9); border-radius: 16px; padding: 24px 24px 24px 20px;
  border-left: 4px solid #6E8FAF; box-shadow: 0 4px 16px rgba(110, 143, 175, 0.2);
  transition: transform 0.25s ease, box-shadow 0.25s ease;
}
body.etapa-nudo .section--nudo-horizonte .horizonte-item:hover {
  transform: translateX(4px); box-shadow: 0 8px 24px rgba(110, 143, 175, 0.3);
}
body.etapa-nudo .section--nudo-horizonte .horizonte-item__num {
  display: flex; align-items: center; justify-content: center; width: 44px; height: 44px; border-radius: 50%;
  background: linear-gradient(135deg, #6E8FAF, #5a7594); color: #fff; font-size: 1.25rem; font-weight: 700; flex-shrink: 0;
}
body.etapa-nudo .section--nudo-horizonte .horizonte-item__icon-wrap {
  display: flex; align-items: center; justify-content: center; width: 48px; height: 48px; border-radius: 12px;
  background: rgba(110, 143, 175, 0.25); color: #6E8FAF; font-size: 1.35rem; flex-shrink: 0;
}
body.etapa-nudo .section--nudo-horizonte .horizonte-item__content { min-width: 0; }
body.etapa-nudo .section--nudo-horizonte .horizonte-item__title { margin: 0 0 8px; font-size: 1.1rem; font-weight: 700; color: #2d2438; }
body.etapa-nudo .section--nudo-horizonte .horizonte-item__text { margin: 0; font-size: 0.95rem; line-height: 1.55; color: #4b5563; }
body.etapa-nudo .section--nudo-horizonte .section__header--with-icon,
body.etapa-nudo .section--nudo-competences .section__header--with-icon {
  display: flex; flex-direction: column; align-items: center; gap: 12px;
}
body.etapa-nudo .section--nudo-horizonte .section__header-icon {
  display: inline-flex; align-items: center; justify-content: center; width: 72px; height: 72px; border-radius: 50%;
  background: rgba(110, 143, 175, 0.4); color: #3d5a75; font-size: 2.25rem; margin-bottom: 8px;
  box-shadow: 0 4px 20px rgba(110, 143, 175, 0.3);
}
@media (max-width: 640px) {
  body.etapa-nudo .section--nudo-horizonte .horizonte-item { grid-template-columns: 1fr; grid-template-rows: auto auto auto; gap: 14px; }
  body.etapa-nudo .section--nudo-horizonte .horizonte-item__num { grid-row: 1; }
  body.etapa-nudo .section--nudo-horizonte .horizonte-item__icon-wrap { grid-row: 2; }
  body.etapa-nudo .section--nudo-horizonte .horizonte-item__content { grid-row: 3; }
}
body.etapa-nudo .section--nudo-competences { background: #C7D6E2; color: #1a1525; }
body.etapa-nudo .section--nudo-competences .section__header h2,
body.etapa-nudo .section--nudo-competences .section__header p { color: #1a1525; }
body.etapa-nudo .section--nudo-competences .section__header-icon {
  background: rgba(110, 143, 175, 0.4); color: #3d5a75; box-shadow: 0 4px 20px rgba(110, 143, 175, 0.3);
}
body.etapa-nudo .section--nudo-competences .competences-grid--dynamic { gap: 24px; }
body.etapa-nudo .section--nudo-competences .competences-grid--dynamic .card-competence {
  background: #fff; border: none; border-radius: 20px; padding: 28px 26px;
  box-shadow: 0 4px 20px rgba(110, 143, 175, 0.12);
  transition: transform 0.25s ease, box-shadow 0.25s ease;
  display: flex; flex-direction: column; align-items: flex-start;
}
body.etapa-nudo .section--nudo-competences .competences-grid--dynamic .card-competence:hover {
  transform: translateY(-4px); box-shadow: 0 12px 28px rgba(110, 143, 175, 0.18);
}
body.etapa-nudo .section--nudo-competences .competences-grid--dynamic .competence-icon-wrap {
  width: 70px; height: 70px; border-radius: 18px;
  background: #C7D6E2; display: flex; align-items: center; justify-content: center;
  margin-bottom: 14px;
}
body.etapa-nudo .section--nudo-competences .competences-grid--dynamic .competence-icon {
  color: #6E8FAF; font-size: 1.75rem;
}
body.etapa-nudo .section--nudo-competences .competence-badge {
  display: inline-block; padding: 6px 14px; border-radius: 999px;
  background: #C7D6E2; color: #1a1525; font-size: 0.8rem; font-weight: 600;
  letter-spacing: 0.02em; margin-bottom: 12px; text-align: center;
}
body.etapa-nudo .section--nudo-competences .competence-teaser {
  color: #4b5563; font-size: 0.95rem; line-height: 1.55; margin: 0 0 16px;
}
body.etapa-nudo .section--nudo-competences .competences-grid--dynamic .competence-name {
  color: #1a1525; font-size: 1.25rem; font-weight: 700; margin: 0 0 8px;
}
body.etapa-nudo .section--nudo-competences .competence-btn {
  border-color: rgba(110, 143, 175, 0.6); color: #6E8FAF; background: rgba(255, 255, 255, 0.8);
}
body.etapa-nudo .section--nudo-competences .competence-btn:hover {
  background: rgba(110, 143, 175, 0.2); border-color: #6E8FAF; color: #3d5a75;
}
body.etapa-nudo .section--nudo-competences .competence-detail { border-top-color: rgba(110, 143, 175, 0.25); }
body.etapa-nudo .section--nudo-competences .competence-list strong { color: #3d5a75; }

/* Rama: Horizonte de expectativas y Competencias (#E17A55 / #F3C1AF) */
body.etapa-rama .section--rama-horizonte {
  background: #F3C1AF;
  color: #1a1525;
}
body.etapa-rama .section--rama-horizonte .section__header h2,
body.etapa-rama .section--rama-horizonte .section__header p { color: #1a1525; }
body.etapa-rama .section--rama-horizonte .horizonte-phase { font-weight: 600; font-size: 1rem; color: #a85a3d; margin: 0 0 8px; }
body.etapa-rama .section--rama-horizonte .horizonte-intro { font-size: 1.1rem; font-weight: 600; color: #2d2438; margin: 0 0 32px; max-width: 640px; margin-left: auto; margin-right: auto; }
body.etapa-rama .section--rama-horizonte .horizonte-aspiraciones { list-style: none; margin: 0; padding: 0; max-width: 900px; margin-left: auto; margin-right: auto; display: grid; gap: 20px; }
body.etapa-rama .section--rama-horizonte .horizonte-item {
  display: grid; grid-template-columns: auto auto 1fr; gap: 20px; align-items: start;
  background: rgba(255, 255, 255, 0.9); border-radius: 16px; padding: 24px 24px 24px 20px;
  border-left: 4px solid #E17A55; box-shadow: 0 4px 16px rgba(225, 122, 85, 0.2);
  transition: transform 0.25s ease, box-shadow 0.25s ease;
}
body.etapa-rama .section--rama-horizonte .horizonte-item:hover {
  transform: translateX(4px); box-shadow: 0 8px 24px rgba(225, 122, 85, 0.3);
}
body.etapa-rama .section--rama-horizonte .horizonte-item__num {
  display: flex; align-items: center; justify-content: center; width: 44px; height: 44px; border-radius: 50%;
  background: linear-gradient(135deg, #E17A55, #c96844); color: #fff; font-size: 1.25rem; font-weight: 700; flex-shrink: 0;
}
body.etapa-rama .section--rama-horizonte .horizonte-item__icon-wrap {
  display: flex; align-items: center; justify-content: center; width: 48px; height: 48px; border-radius: 12px;
  background: rgba(225, 122, 85, 0.25); color: #E17A55; font-size: 1.35rem; flex-shrink: 0;
}
body.etapa-rama .section--rama-horizonte .horizonte-item__content { min-width: 0; }
body.etapa-rama .section--rama-horizonte .horizonte-item__title { margin: 0 0 8px; font-size: 1.1rem; font-weight: 700; color: #2d2438; }
body.etapa-rama .section--rama-horizonte .horizonte-item__text { margin: 0; font-size: 0.95rem; line-height: 1.55; color: #4b5563; }
body.etapa-rama .section--rama-horizonte .section__header--with-icon,
body.etapa-rama .section--rama-competences .section__header--with-icon {
  display: flex; flex-direction: column; align-items: center; gap: 12px;
}
body.etapa-rama .section--rama-horizonte .section__header-icon {
  display: inline-flex; align-items: center; justify-content: center; width: 72px; height: 72px; border-radius: 50%;
  background: rgba(225, 122, 85, 0.4); color: #a85a3d; font-size: 2.25rem; margin-bottom: 8px;
  box-shadow: 0 4px 20px rgba(225, 122, 85, 0.3);
}
@media (max-width: 640px) {
  body.etapa-rama .section--rama-horizonte .horizonte-item { grid-template-columns: 1fr; grid-template-rows: auto auto auto; gap: 14px; }
  body.etapa-rama .section--rama-horizonte .horizonte-item__num { grid-row: 1; }
  body.etapa-rama .section--rama-horizonte .horizonte-item__icon-wrap { grid-row: 2; }
  body.etapa-rama .section--rama-horizonte .horizonte-item__content { grid-row: 3; }
}
body.etapa-rama .section--rama-competences { background: #F3C1AF; color: #1a1525; }
body.etapa-rama .section--rama-competences .section__header h2,
body.etapa-rama .section--rama-competences .section__header p { color: #1a1525; }
body.etapa-rama .section--rama-competences .section__header-icon {
  background: rgba(225, 122, 85, 0.4); color: #a85a3d; box-shadow: 0 4px 20px rgba(225, 122, 85, 0.3);
}
body.etapa-rama .section--rama-competences .competences-grid--dynamic { gap: 24px; }
body.etapa-rama .section--rama-competences .competences-grid--dynamic .card-competence {
  background: #fff; border: none; border-radius: 20px; padding: 28px 26px;
  box-shadow: 0 4px 20px rgba(225, 122, 85, 0.12);
  transition: transform 0.25s ease, box-shadow 0.25s ease;
  display: flex; flex-direction: column; align-items: flex-start;
}
body.etapa-rama .section--rama-competences .competences-grid--dynamic .card-competence:hover {
  transform: translateY(-4px); box-shadow: 0 12px 28px rgba(225, 122, 85, 0.18);
}
body.etapa-rama .section--rama-competences .competences-grid--dynamic .competence-icon-wrap {
  width: 70px; height: 70px; border-radius: 18px;
  background: #F3C1AF; display: flex; align-items: center; justify-content: center;
  margin-bottom: 14px;
}
body.etapa-rama .section--rama-competences .competences-grid--dynamic .competence-icon {
  color: #E17A55; font-size: 1.75rem;
}
body.etapa-rama .section--rama-competences .competence-badge {
  display: inline-block; padding: 6px 14px; border-radius: 999px;
  background: #F3C1AF; color: #1a1525; font-size: 0.8rem; font-weight: 600;
  letter-spacing: 0.02em; margin-bottom: 12px; text-align: center;
}
body.etapa-rama .section--rama-competences .competence-teaser {
  color: #4b5563; font-size: 0.95rem; line-height: 1.55; margin: 0 0 16px;
}
body.etapa-rama .section--rama-competences .competences-grid--dynamic .competence-name {
  color: #1a1525; font-size: 1.25rem; font-weight: 700; margin: 0 0 8px;
}
body.etapa-rama .section--rama-competences .competence-btn {
  border-color: rgba(225, 122, 85, 0.6); color: #E17A55; background: rgba(255, 255, 255, 0.8);
}
body.etapa-rama .section--rama-competences .competence-btn:hover {
  background: rgba(225, 122, 85, 0.2); border-color: #E17A55; color: #a85a3d;
}
body.etapa-rama .section--rama-competences .competence-detail { border-top-color: rgba(225, 122, 85, 0.25); }
body.etapa-rama .section--rama-competences .competence-list strong { color: #a85a3d; }

/* Flor: Horizonte de expectativas y Competencias (#E17A55 / #F3C1AF) */
body.etapa-flor .section--flor-horizonte {
  background: #F3C1AF;
  color: #1a1525;
}
body.etapa-flor .section--flor-horizonte .section__header h2,
body.etapa-flor .section--flor-horizonte .section__header p { color: #1a1525; }
body.etapa-flor .section--flor-horizonte .horizonte-phase { font-weight: 600; font-size: 1rem; color: #a85a3d; margin: 0 0 8px; }
body.etapa-flor .section--flor-horizonte .horizonte-intro { font-size: 1.1rem; font-weight: 600; color: #2d2438; margin: 0 0 32px; max-width: 640px; margin-left: auto; margin-right: auto; }
body.etapa-flor .section--flor-horizonte .horizonte-aspiraciones { list-style: none; margin: 0; padding: 0; max-width: 900px; margin-left: auto; margin-right: auto; display: grid; gap: 20px; }
body.etapa-flor .section--flor-horizonte .horizonte-item {
  display: grid; grid-template-columns: auto auto 1fr; gap: 20px; align-items: start;
  background: rgba(255, 255, 255, 0.9); border-radius: 16px; padding: 24px 24px 24px 20px;
  border-left: 4px solid #E17A55; box-shadow: 0 4px 16px rgba(225, 122, 85, 0.2);
  transition: transform 0.25s ease, box-shadow 0.25s ease;
}
body.etapa-flor .section--flor-horizonte .horizonte-item:hover {
  transform: translateX(4px); box-shadow: 0 8px 24px rgba(225, 122, 85, 0.3);
}
body.etapa-flor .section--flor-horizonte .horizonte-item__num {
  display: flex; align-items: center; justify-content: center; width: 44px; height: 44px; border-radius: 50%;
  background: linear-gradient(135deg, #E17A55, #c96844); color: #fff; font-size: 1.25rem; font-weight: 700; flex-shrink: 0;
}
body.etapa-flor .section--flor-horizonte .horizonte-item__icon-wrap {
  display: flex; align-items: center; justify-content: center; width: 48px; height: 48px; border-radius: 12px;
  background: rgba(225, 122, 85, 0.25); color: #E17A55; font-size: 1.35rem; flex-shrink: 0;
}
body.etapa-flor .section--flor-horizonte .horizonte-item__content { min-width: 0; }
body.etapa-flor .section--flor-horizonte .horizonte-item__title { margin: 0 0 8px; font-size: 1.1rem; font-weight: 700; color: #2d2438; }
body.etapa-flor .section--flor-horizonte .horizonte-item__text { margin: 0; font-size: 0.95rem; line-height: 1.55; color: #4b5563; }
body.etapa-flor .section--flor-horizonte .section__header--with-icon,
body.etapa-flor .section--flor-competences .section__header--with-icon {
  display: flex; flex-direction: column; align-items: center; gap: 12px;
}
body.etapa-flor .section--flor-horizonte .section__header-icon {
  display: inline-flex; align-items: center; justify-content: center; width: 72px; height: 72px; border-radius: 50%;
  background: rgba(225, 122, 85, 0.4); color: #a85a3d; font-size: 2.25rem; margin-bottom: 8px;
  box-shadow: 0 4px 20px rgba(225, 122, 85, 0.3);
}
@media (max-width: 640px) {
  body.etapa-flor .section--flor-horizonte .horizonte-item { grid-template-columns: 1fr; grid-template-rows: auto auto auto; gap: 14px; }
  body.etapa-flor .section--flor-horizonte .horizonte-item__num { grid-row: 1; }
  body.etapa-flor .section--flor-horizonte .horizonte-item__icon-wrap { grid-row: 2; }
  body.etapa-flor .section--flor-horizonte .horizonte-item__content { grid-row: 3; }
}
body.etapa-flor .section--flor-competences { background: #F3C1AF; color: #1a1525; }
body.etapa-flor .section--flor-competences .section__header h2,
body.etapa-flor .section--flor-competences .section__header p { color: #1a1525; }
body.etapa-flor .section--flor-competences .section__header-icon {
  background: rgba(225, 122, 85, 0.4); color: #a85a3d; box-shadow: 0 4px 20px rgba(225, 122, 85, 0.3);
}
body.etapa-flor .section--flor-competences .competences-grid--dynamic { gap: 24px; }
body.etapa-flor .section--flor-competences .competences-grid--dynamic .card-competence {
  background: #fff; border: none; border-radius: 20px; padding: 28px 26px;
  box-shadow: 0 4px 20px rgba(225, 122, 85, 0.12);
  transition: transform 0.25s ease, box-shadow 0.25s ease;
  display: flex; flex-direction: column; align-items: flex-start;
}
body.etapa-flor .section--flor-competences .competences-grid--dynamic .card-competence:hover {
  transform: translateY(-4px); box-shadow: 0 12px 28px rgba(225, 122, 85, 0.18);
}
body.etapa-flor .section--flor-competences .competences-grid--dynamic .competence-icon-wrap {
  width: 70px; height: 70px; border-radius: 18px;
  background: #F3C1AF; display: flex; align-items: center; justify-content: center;
  margin-bottom: 14px;
}
body.etapa-flor .section--flor-competences .competences-grid--dynamic .competence-icon {
  color: #E17A55; font-size: 1.75rem;
}
body.etapa-flor .section--flor-competences .competence-badge {
  display: inline-block; padding: 6px 14px; border-radius: 999px;
  background: #F3C1AF; color: #1a1525; font-size: 0.8rem; font-weight: 600;
  letter-spacing: 0.02em; margin-bottom: 12px; text-align: center;
}
body.etapa-flor .section--flor-competences .competence-teaser {
  color: #4b5563; font-size: 0.95rem; line-height: 1.55; margin: 0 0 16px;
}
body.etapa-flor .section--flor-competences .competences-grid--dynamic .competence-name {
  color: #1a1525; font-size: 1.25rem; font-weight: 700; margin: 0 0 8px;
}
body.etapa-flor .section--flor-competences .competence-btn {
  border-color: rgba(225, 122, 85, 0.6); color: #E17A55; background: rgba(255, 255, 255, 0.8);
}
body.etapa-flor .section--flor-competences .competence-btn:hover {
  background: rgba(225, 122, 85, 0.2); border-color: #E17A55; color: #a85a3d;
}
body.etapa-flor .section--flor-competences .competence-detail { border-top-color: rgba(225, 122, 85, 0.25); }
body.etapa-flor .section--flor-competences .competence-list strong { color: #a85a3d; }

body.etapa-rama .section--light .card--feature,
body.etapa-rama .section--light .card--usecase { border-top-color: #E17A55; }
body.etapa-rama .card--feature:hover,
body.etapa-rama .card--usecase:hover { border-color: #E17A55; background: radial-gradient(circle at top left, rgba(225, 122, 85, 0.2), #020617); }

body.etapa-flor .section--light .card--feature,
body.etapa-flor .section--light .card--usecase { border-top-color: #E17A55; }
body.etapa-flor .card--feature:hover,
body.etapa-flor .card--usecase:hover { border-color: #E17A55; background: radial-gradient(circle at top left, rgba(225, 122, 85, 0.2), #020617); }

body.etapa-fruto .section--light .card--feature,
body.etapa-fruto .section--light .card--usecase { border-top-color: #8C7CB8; }
body.etapa-fruto .card--feature:hover,
body.etapa-fruto .card--usecase:hover { border-color: #8C7CB8; background: radial-gradient(circle at top left, rgba(140, 124, 184, 0.2), #020617); }

/* Fruto: fondo sección competencias y estilo dinámico */
body.etapa-fruto .section--light {
  background: #D6CCE7;
  color: #1a1525;
}

body.etapa-fruto .section--light .section__header h2,
body.etapa-fruto .section--light .section__header p {
  color: #1a1525;
}

/* Fruto: sección Horizonte de expectativas (aspiraciones) */
body.etapa-fruto .section--fruto-horizonte {
  background: #D6CCE7;
  color: #1a1525;
}

body.etapa-fruto .section--fruto-horizonte .section__header h2,
body.etapa-fruto .section--fruto-horizonte .section__header p {
  color: #1a1525;
}

body.etapa-fruto .section--fruto-horizonte .horizonte-phase {
  font-weight: 600;
  font-size: 1rem;
  color: #5a4a7a;
  margin: 0 0 8px;
}

body.etapa-fruto .section--fruto-horizonte .horizonte-intro {
  font-size: 1.1rem;
  font-weight: 600;
  color: #2d2438;
  margin: 0 0 32px;
  max-width: 640px;
  margin-left: auto;
  margin-right: auto;
}

body.etapa-fruto .section--fruto-horizonte .horizonte-aspiraciones {
  list-style: none;
  margin: 0;
  padding: 0;
  max-width: 900px;
  margin-left: auto;
  margin-right: auto;
  display: grid;
  gap: 20px;
}

body.etapa-fruto .section--fruto-horizonte .horizonte-item {
  display: grid;
  grid-template-columns: auto auto 1fr;
  gap: 20px;
  align-items: start;
  background: rgba(255, 255, 255, 0.9);
  border-radius: 16px;
  padding: 24px 24px 24px 20px;
  border-left: 4px solid #8C7CB8;
  box-shadow: 0 4px 16px rgba(140, 124, 184, 0.12);
  transition: transform 0.25s ease, box-shadow 0.25s ease;
}

body.etapa-fruto .section--fruto-horizonte .horizonte-item:hover {
  transform: translateX(4px);
  box-shadow: 0 8px 24px rgba(140, 124, 184, 0.2);
}

body.etapa-fruto .section--fruto-horizonte .horizonte-item__num {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 44px;
  height: 44px;
  border-radius: 50%;
  background: linear-gradient(135deg, #8C7CB8, #6e6096);
  color: #fff;
  font-size: 1.25rem;
  font-weight: 700;
  flex-shrink: 0;
}

body.etapa-fruto .section--fruto-horizonte .horizonte-item__icon-wrap {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 48px;
  height: 48px;
  border-radius: 12px;
  background: rgba(140, 124, 184, 0.2);
  color: #8C7CB8;
  font-size: 1.35rem;
  flex-shrink: 0;
}

body.etapa-fruto .section--fruto-horizonte .horizonte-item__content {
  min-width: 0;
}

body.etapa-fruto .section--fruto-horizonte .horizonte-item__title {
  margin: 0 0 8px;
  font-size: 1.1rem;
  font-weight: 700;
  color: #2d2438;
}

body.etapa-fruto .section--fruto-horizonte .horizonte-item__text {
  margin: 0;
  font-size: 0.95rem;
  line-height: 1.55;
  color: #4b5563;
}

@media (max-width: 640px) {
  body.etapa-fruto .section--fruto-horizonte .horizonte-item {
    grid-template-columns: 1fr;
    grid-template-rows: auto auto auto;
    gap: 14px;
  }
  body.etapa-fruto .section--fruto-horizonte .horizonte-item__num { grid-row: 1; }
  body.etapa-fruto .section--fruto-horizonte .horizonte-item__icon-wrap { grid-row: 2; }
  body.etapa-fruto .section--fruto-horizonte .horizonte-item__content { grid-row: 3; }
}

body.etapa-fruto .section--light .section__header--with-icon {
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 12px;
}

body.etapa-fruto .section--light .section__header-icon {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 72px;
  height: 72px;
  border-radius: 50%;
  background: rgba(140, 124, 184, 0.4);
  color: #5a4a7a;
  font-size: 2.25rem;
  margin-bottom: 8px;
  box-shadow: 0 4px 20px rgba(140, 124, 184, 0.3);
}

body.etapa-fruto .section--light .competences-grid--dynamic {
  gap: 24px;
}

body.etapa-fruto .section--light .competences-grid--dynamic .card-competence {
  background: rgba(255, 255, 255, 0.92);
  border: 1px solid rgba(140, 124, 184, 0.25);
  border-left: 4px solid #8C7CB8;
  border-radius: 16px;
  padding: 24px 22px;
  box-shadow: 0 4px 16px rgba(140, 124, 184, 0.12);
  transition: transform 0.25s ease, box-shadow 0.25s ease, border-color 0.25s ease;
}

body.etapa-fruto .section--light .competences-grid--dynamic .card-competence:hover {
  transform: translateY(-4px);
  box-shadow: 0 12px 28px rgba(140, 124, 184, 0.22);
  border-left-color: #6e6096;
}

body.etapa-fruto .section--light .competences-grid--dynamic .competence-icon-wrap {
  width: 48px;
  height: 48px;
  border-radius: 12px;
  background: linear-gradient(135deg, rgba(140, 124, 184, 0.25), rgba(140, 124, 184, 0.1));
  display: flex;
  align-items: center;
  justify-content: center;
  margin-bottom: 14px;
}

body.etapa-fruto .section--light .competences-grid--dynamic .competence-icon {
  color: #8C7CB8;
  font-size: 1.35rem;
}

body.etapa-fruto .section--light .competences-grid--dynamic .competence-name {
  color: #2d2438;
  font-size: 1.15rem;
  margin-bottom: 4px;
}

body.etapa-fruto .section--light .competences-grid--dynamic .competence-age {
  color: #5a4a7a;
  font-size: 0.8rem;
  font-weight: 600;
  margin-bottom: 14px;
  letter-spacing: 0.02em;
}

/* Badge y teaser: vista inicial más visual */
body.etapa-fruto .section--light .competence-badge {
  display: inline-block;
  padding: 4px 10px;
  border-radius: 999px;
  background: rgba(140, 124, 184, 0.35);
  color: #5a4a7a;
  font-size: 0.75rem;
  font-weight: 600;
  letter-spacing: 0.03em;
  margin-bottom: 12px;
}

body.etapa-fruto .section--light .competence-teaser {
  margin: 0 0 16px;
  font-size: 0.95rem;
  line-height: 1.5;
  color: #4b5563;
  flex: 1;
}

body.etapa-fruto .section--light .card-competence--expandable {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
}

body.etapa-fruto .section--light .card-competence--expandable .competence-btn {
  margin-top: auto;
  padding: 10px 18px;
  border-radius: 999px;
  border: 1px solid rgba(140, 124, 184, 0.6);
  background: rgba(255, 255, 255, 0.8);
  color: #8C7CB8;
  font-weight: 600;
  font-size: 0.9rem;
  cursor: pointer;
  transition: background 0.2s ease, color 0.2s ease, border-color 0.2s ease, transform 0.2s ease;
}

body.etapa-fruto .section--light .card-competence--expandable .competence-btn:hover {
  background: rgba(140, 124, 184, 0.2);
  border-color: #8C7CB8;
  color: #5a4a7a;
}

body.etapa-fruto .section--light .card-competence--expandable .competence-detail {
  width: 100%;
  margin-top: 16px;
  padding-top: 16px;
  border-top: 1px solid rgba(140, 124, 184, 0.25);
  animation: competenceExpand 0.3s ease;
}

@keyframes competenceExpand {
  from {
    opacity: 0;
    transform: translateY(-8px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

body.etapa-fruto .section--light .competences-grid--dynamic .competence-list {
  color: #374151;
  padding-left: 1.2rem;
}

body.etapa-fruto .section--light .competences-grid--dynamic .competence-list li {
  margin-bottom: 10px;
}

body.etapa-fruto .section--light .competences-grid--dynamic .competence-list strong {
  color: #5a4a7a;
}

/* Estilos de secciones por etapa */

body.etapa-escuelita .card--feature:hover,
body.etapa-escuelita .card--usecase:hover {
  border-color: #5FAFA8;
  background: radial-gradient(circle at top left, rgba(95, 175, 168, 0.15), #020617);
}

body.etapa-infantil .card--feature:hover,
body.etapa-infantil .card--usecase:hover {
  border-color: #E3C34A;
  background: radial-gradient(circle at top left, rgba(227, 195, 74, 0.2), #020617);
}

body.etapa-primaria .card--feature:hover,
body.etapa-primaria .card--usecase:hover {
  border-color: #3b82f6;
  background: radial-gradient(circle at top left, rgba(59, 130, 246, 0.15), #020617);
}

body.etapa-eso .card--feature:hover,
body.etapa-eso .card--usecase:hover {
  border-color: #f97316;
  background: radial-gradient(circle at top left, rgba(249, 115, 22, 0.15), #020617);
}

body.etapa-bachillerato .card--feature:hover,
body.etapa-bachillerato .card--usecase:hover {
  border-color: #f97316;
  background: radial-gradient(circle at top left, rgba(249, 115, 22, 0.15), #020617);
}

body.etapa-fp .card--feature:hover,
body.etapa-fp .card--usecase:hover {
  border-color: #8b5cf6;
  background: radial-gradient(circle at top left, rgba(139, 92, 246, 0.15), #020617);
}

/* Colores en secciones claras */
body.etapa-escuelita .section--light .card--feature,
body.etapa-escuelita .section--light .card--usecase {
  border-top-color: #5FAFA8;
}

body.etapa-infantil .section--light .card--feature,
body.etapa-infantil .section--light .card--usecase {
  border-top-color: #E3C34A;
}

body.etapa-primaria .section--light .card--feature,
body.etapa-primaria .section--light .card--usecase {
  border-top-color: #3b82f6;
}

body.etapa-eso .section--light .card--feature,
body.etapa-eso .section--light .card--usecase {
  border-top-color: #f97316;
}

body.etapa-bachillerato .section--light .card--feature,
body.etapa-bachillerato .section--light .card--usecase {
  border-top-color: #f97316;
}

body.etapa-fp .section--light .card--feature,
body.etapa-fp .section--light .card--usecase {
  border-top-color: #8b5cf6;
}

/* Colores en tarjetas de etapas en index */
.card--usecase[href*="escuelita"],
.card--usecase h3:contains("Escuelita") {
  border-top-color: #10b981;
}

.card--usecase h3:contains("Infantil") {
  border-top-color: #f59e0b;
}

.card--usecase h3:contains("Primaria") {
  border-top-color: #3b82f6;
}

.card--usecase h3:contains("ESO") {
  border-top-color: #f97316;
}

.card--usecase h3:contains("Bachillerato") {
  border-top-color: #f97316;
}

.card--usecase h3:contains("FP") {
  border-top-color: #8b5cf6;
}

/* Aplicar colores a las tarjetas de etapas en index */
/* Raíz: infantil #F7E8B8 / #E3C34A */
/* Raíz = Escuelita: verde agua #C8E4E2 / #5FAFA8 */
#etapas .card--usecase:nth-child(1) {
  border-top-color: #5FAFA8;
}

#etapas .card--usecase:nth-child(1):hover {
  border-color: #5FAFA8;
  background: radial-gradient(circle at top left, rgba(95, 175, 168, 0.2), #C8E4E2);
}

/* Tallo = Infantil: amarillo/crema #F7E8B8 / #E3C34A */
#etapas .card--usecase:nth-child(2) {
  border-top-color: #E3C34A;
}

#etapas .card--usecase:nth-child(2):hover {
  border-color: #E3C34A;
  background: radial-gradient(circle at top left, rgba(227, 195, 74, 0.2), #F7E8B8);
}

/* Nudo: primaria #C7D6E2 / #6E8FAF */
#etapas .card--usecase:nth-child(3) {
  border-top-color: #6E8FAF;
}

#etapas .card--usecase:nth-child(3):hover {
  border-color: #6E8FAF;
  background: radial-gradient(circle at top left, rgba(110, 143, 175, 0.2), #C7D6E2);
}

/* Rama: secundaria #F3C1AF / #E17A55 */
#etapas .card--usecase:nth-child(4) {
  border-top-color: #E17A55;
}

#etapas .card--usecase:nth-child(4):hover {
  border-color: #E17A55;
  background: radial-gradient(circle at top left, rgba(225, 122, 85, 0.2), #F3C1AF);
}

/* Flor: secundaria #F3C1AF / #E17A55 */
#etapas .card--usecase:nth-child(5) {
  border-top-color: #E17A55;
}

#etapas .card--usecase:nth-child(5):hover {
  border-color: #E17A55;
  background: radial-gradient(circle at top left, rgba(225, 122, 85, 0.2), #F3C1AF);
}

/* Fruto: fp #D6CCE7 / #8C7CB8 */
#etapas .card--usecase:nth-child(6) {
  border-top-color: #8C7CB8;
}

#etapas .card--usecase:nth-child(6):hover {
  border-color: #8C7CB8;
  background: radial-gradient(circle at top left, rgba(140, 124, 184, 0.2), #D6CCE7);
}

/* Texto legible en hover (fondo claro por etapa) */
#etapas .card--usecase:hover h3 {
  color: #151b26;
}

#etapas .card--usecase:nth-child(1):hover h3 i { color: #5FAFA8; }
#etapas .card--usecase:nth-child(2):hover h3 i { color: #E3C34A; }
#etapas .card--usecase:nth-child(3):hover h3 i { color: #6E8FAF; }
#etapas .card--usecase:nth-child(4):hover h3 i { color: #E17A55; }
#etapas .card--usecase:nth-child(5):hover h3 i { color: #E17A55; }
#etapas .card--usecase:nth-child(6):hover h3 i { color: #8C7CB8; }

#etapas .card--usecase:hover > div[role="region"] {
  color: #374151;
  border-top-color: rgba(21, 27, 38, 0.12);
}

/* Botones "Ver detalle" con colores de etapa */
#etapas .card--usecase:nth-child(1) .btn--ghost:hover {
  border-color: #5FAFA8;
  color: #5FAFA8;
}

#etapas .card--usecase:nth-child(2) .btn--ghost:hover {
  border-color: #E3C34A;
  color: #151b26;
}

#etapas .card--usecase:nth-child(1) .stage-card-link {
  color: #5FAFA8;
}

#etapas .card--usecase:nth-child(2) .stage-card-link {
  color: #E3C34A;
}

#etapas .card--usecase:nth-child(3) .stage-card-link {
  color: #6E8FAF;
}

#etapas .card--usecase:nth-child(4) .stage-card-link {
  color: #E17A55;
}

#etapas .card--usecase:nth-child(5) .stage-card-link {
  color: #E17A55;
}

#etapas .card--usecase:nth-child(6) .stage-card-link {
  color: #8C7CB8;
}

#etapas .card--usecase:nth-child(3) .btn--ghost:hover {
  border-color: #6E8FAF;
  color: #6E8FAF;
}

#etapas .card--usecase:nth-child(4) .btn--ghost:hover {
  border-color: #E17A55;
  color: #E17A55;
}

#etapas .card--usecase:nth-child(5) .btn--ghost:hover {
  border-color: #E17A55;
  color: #E17A55;
}

#etapas .card--usecase:nth-child(6) .btn--ghost:hover {
  border-color: #8C7CB8;
  color: #8C7CB8;
}

/* Mismos colores y hover para el grid 3x2 en Horizonte de expectativas */
#horizonte .card--usecase:nth-child(1) {
  border-top-color: #5FAFA8;
}
#horizonte .card--usecase:nth-child(1):hover {
  border-color: #5FAFA8;
  background: radial-gradient(circle at top left, rgba(95, 175, 168, 0.2), #C8E4E2);
}
#horizonte .card--usecase:nth-child(2) {
  border-top-color: #E3C34A;
}
#horizonte .card--usecase:nth-child(2):hover {
  border-color: #E3C34A;
  background: radial-gradient(circle at top left, rgba(227, 195, 74, 0.2), #F7E8B8);
}
#horizonte .card--usecase:nth-child(3) {
  border-top-color: #6E8FAF;
}
#horizonte .card--usecase:nth-child(3):hover {
  border-color: #6E8FAF;
  background: radial-gradient(circle at top left, rgba(110, 143, 175, 0.2), #C7D6E2);
}
#horizonte .card--usecase:nth-child(4) {
  border-top-color: #E17A55;
}
#horizonte .card--usecase:nth-child(4):hover {
  border-color: #E17A55;
  background: radial-gradient(circle at top left, rgba(225, 122, 85, 0.2), #F3C1AF);
}
#horizonte .card--usecase:nth-child(5) {
  border-top-color: #E17A55;
}
#horizonte .card--usecase:nth-child(5):hover {
  border-color: #E17A55;
  background: radial-gradient(circle at top left, rgba(225, 122, 85, 0.2), #F3C1AF);
}
#horizonte .card--usecase:nth-child(6) {
  border-top-color: #8C7CB8;
}
#horizonte .card--usecase:nth-child(6):hover {
  border-color: #8C7CB8;
  background: radial-gradient(circle at top left, rgba(140, 124, 184, 0.2), #D6CCE7);
}
#horizonte .card--usecase:hover h3 {
  color: #151b26;
}
#horizonte .card--usecase:nth-child(1):hover h3 i { color: #5FAFA8; }
#horizonte .card--usecase:nth-child(2):hover h3 i { color: #E3C34A; }
#horizonte .card--usecase:nth-child(3):hover h3 i { color: #6E8FAF; }
#horizonte .card--usecase:nth-child(4):hover h3 i { color: #E17A55; }
#horizonte .card--usecase:nth-child(5):hover h3 i { color: #E17A55; }
#horizonte .card--usecase:nth-child(6):hover h3 i { color: #8C7CB8; }
#horizonte .card--usecase:hover > div[role="region"] {
  color: #374151;
  border-top-color: rgba(21, 27, 38, 0.12);
}
#horizonte .card--usecase:nth-child(1) .btn--ghost:hover {
  border-color: #5FAFA8;
  color: #5FAFA8;
}
#horizonte .card--usecase:nth-child(2) .btn--ghost:hover {
  border-color: #E3C34A;
  color: #151b26;
}
#horizonte .card--usecase:nth-child(3) .btn--ghost:hover {
  border-color: #6E8FAF;
  color: #6E8FAF;
}
#horizonte .card--usecase:nth-child(4) .btn--ghost:hover {
  border-color: #E17A55;
  color: #E17A55;
}
#horizonte .card--usecase:nth-child(5) .btn--ghost:hover {
  border-color: #E17A55;
  color: #E17A55;
}
#horizonte .card--usecase:nth-child(6) .btn--ghost:hover {
  border-color: #8C7CB8;
  color: #8C7CB8;
}
#horizonte .card--usecase:nth-child(1) .stage-card-link { color: #5FAFA8; }
#horizonte .card--usecase:nth-child(2) .stage-card-link { color: #E3C34A; }
#horizonte .card--usecase:nth-child(3) .stage-card-link { color: #6E8FAF; }
#horizonte .card--usecase:nth-child(4) .stage-card-link { color: #E17A55; }
#horizonte .card--usecase:nth-child(5) .stage-card-link { color: #E17A55; }
#horizonte .card--usecase:nth-child(6) .stage-card-link { color: #8C7CB8; }

/* Animaciones de entrada */

.reveal-on-scroll {
  opacity: 0;
  transform: translateY(20px);
  transition: opacity 0.6s ease, transform 0.6s ease;
}

.reveal-on-scroll.is-visible {
  opacity: 1;
  transform: translateY(0);
}

/* Responsive */

/* Responsive - Mejoras para UX y accesibilidad */

@media (max-width: 1200px) {
  .grid--4 {
    grid-template-columns: repeat(2, 1fr);
  }

  .cards--4 {
    grid-template-columns: repeat(2, 1fr);
  }

  .competences-grid {
    grid-template-columns: repeat(2, 1fr);
  }
}

@media (max-width: 900px) {
  .hero__content {
    grid-template-columns: minmax(0, 1fr);
  }

  .hero__visual {
    justify-content: flex-start;
    align-items: center;
  }

  .hero__visual-img {
    max-height: min(360px, 45vh);
  }

  .hero-card {
    max-width: none;
    width: 100%;
  }

  .dashboard {
    grid-template-columns: minmax(0, 1fr);
  }

  /* Grids responsive - 2 columnas en tablet */
  .grid--3 {
    grid-template-columns: repeat(2, 1fr);
  }

  .grid--4 {
    grid-template-columns: repeat(2, 1fr);
  }

  .cards--3 {
    grid-template-columns: repeat(2, 1fr);
  }

  .cards--4 {
    grid-template-columns: repeat(2, 1fr);
  }

  .competences-grid {
    grid-template-columns: repeat(2, 1fr);
  }

  /* Ajustes específicos para grids 2x2 */
  .grid--2-3 {
    grid-template-columns: repeat(2, 1fr);
  }

  .grid--2-3 > *:nth-child(3) {
    grid-column: span 1;
  }

  /* Nuevos elementos */
  .competencies-diagram__ring {
    grid-template-columns: repeat(2, 1fr);
  }

  .guide-flow {
    flex-direction: column;
  }

  .guide-flow__arrow {
    transform: rotate(90deg);
  }

  .guide-flow__step {
    max-width: 100%;
    width: 100%;
  }

  .performance-levels .grid--2 {
    grid-template-columns: 1fr;
  }
}

@media (max-width: 720px) {
  html {
    scroll-padding-top: 70px;
  }

  .criteria-grid {
    grid-template-columns: 1fr;
    grid-template-rows: auto auto auto;
    gap: 16px;
  }

  .criteria-connector {
    grid-column: 1;
    padding: 8px 0;
    font-size: 1rem;
  }

  .nav__toggle {
    display: flex;
  }

  .nav__links {
    position: fixed;
    top: 60px;
    left: 0;
    right: 0;
    bottom: auto;
    flex-direction: column;
    gap: 0;
    padding: 16px;
    margin: 0;
    background: rgba(41, 51, 69, 0.98);
    backdrop-filter: blur(16px);
    -webkit-backdrop-filter: blur(16px);
    border-bottom: 1px solid rgba(250, 250, 247, 0.08);
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);
    max-height: calc(100vh - 60px);
    overflow-y: auto;
    display: none;
    z-index: 999;
  }

  .nav--open .nav__links {
    display: flex;
  }

  .nav__links li {
    width: 100%;
    border-bottom: 1px solid rgba(250, 250, 247, 0.08);
  }

  .nav__links li:last-child {
    border-bottom: none;
  }

  .nav__links a {
    width: 100%;
    padding: 14px 16px;
    flex-direction: row;
    justify-content: flex-start;
    gap: 12px;
    min-width: unset;
    text-align: left;
    font-size: 0.95rem;
  }

  .nav__links a span {
    font-size: 0.9rem;
  }

  .nav__logo {
    font-size: 0.85rem;
    padding: 5px 10px;
  }

  .nav__logo i {
    font-size: 0.9rem;
  }

  .card h3 {
    font-size: 1.1rem;
  }

  .card h3 i {
    font-size: 1rem;
  }

  .btn i {
    font-size: 0.85rem;
  }

  .hero__text h1 {
    font-size: clamp(1.8rem, 5vw, 2.5rem);
    margin-bottom: 20px;
    line-height: 1.2;
  }

  .hero__subtitle {
    font-size: 0.95rem;
    margin-bottom: 20px;
  }

  .hero__actions {
    margin-bottom: 24px;
  }

  .hero__note {
    margin-bottom: 32px;
    font-size: 0.85rem;
  }

  .nav {
    padding: 12px 16px;
  }

  .hero {
    padding-top: 100px;
    padding-left: 18px;
    padding-right: 18px;
    min-height: auto;
  }

  .hero__content {
    grid-template-columns: 1fr;
    gap: 32px;
    padding-top: 0;
  }

  .section {
    padding: 54px 18px;
    scroll-margin-top: 70px;
  }

  .section__header p {
    max-width: 100%;
  }

  .hero__subtitle,
  .hero__note {
    max-width: 100%;
  }

  .card {
    min-width: 0;
  }

  .section__header {
    margin-bottom: 26px;
  }

  .section__header h2 {
    font-size: 1.5rem;
  }

  /* Grids a una columna en móvil */
  .grid--2,
  .grid--3,
  .grid--4,
  .grid--3x2,
  .grid--4x2 {
    grid-template-columns: 1fr;
  }

  .grid--2-3 > *:nth-child(3) {
    grid-column: 1;
    max-width: none;
  }

  .stage-links::before {
    width: 100%;
  }

  .stage-links__buttons {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 8px;
    max-width: 100%;
  }

  .stage-links__buttons .chip {
    width: 100%;
    justify-content: center;
    text-align: center;
    font-size: 0.75rem;
    padding: 8px 6px;
    min-height: 34px;
  }

  .hero__visual {
    align-items: center;
    justify-content: center;
  }

  .hero__visual-img {
    margin: 0 auto;
  }

  .stage-hero {
    padding: 80px 18px 50px;
  }

  .stage-hero__content {
    grid-template-columns: 1fr;
    gap: 20px;
  }

  .stage-hero__content p {
    max-width: 100%;
  }

  .stage-cards-list {
    grid-template-columns: repeat(6, minmax(120px, 1fr));
  }

  .cards,
  .cards--2,
  .cards--3,
  .cards--4 {
    grid-template-columns: 1fr;
  }

  .competences-grid {
    grid-template-columns: 1fr;
  }

  .competence-detail {
    word-wrap: break-word;
    overflow-wrap: break-word;
  }

  .competence-name {
    word-wrap: break-word;
  }

  .section--light {
    padding: 54px 18px 80px;
  }

  .section-cta {
    padding: 60px 20px 80px;
  }

  .cta-inner {
    padding: 0 8px;
  }

  .cta-title {
    font-size: 1.35rem;
    line-height: 1.35;
    word-wrap: break-word;
  }

  .footer {
    padding: 20px 16px 24px;
    font-size: 0.8rem;
  }

  .footer-text,
  .footer-credit {
    word-wrap: break-word;
    overflow-wrap: break-word;
  }

  /* Elementos visuales en móvil */
  .competencies-diagram {
    padding: 40px 20px;
  }

  .competencies-diagram__ring {
    grid-template-columns: 1fr;
    gap: 16px;
  }

  .guide-structure,
  .performance-levels {
    padding: 24px 16px;
  }

  .table-cards {
    gap: 20px;
  }

  .table-card {
    padding: 22px 18px;
  }

  .table-card__title {
    font-size: 1.05rem;
    margin-bottom: 16px;
  }

  .info-box {
    padding: 24px 16px;
  }

  .info-box .grid--2 {
    grid-template-columns: 1fr;
  }
}

@media (max-width: 480px) {
  .section {
    padding: 44px 14px;
  }

  .hero {
    padding-left: 14px;
    padding-right: 14px;
  }

  .hero__actions {
    flex-direction: column;
    gap: 12px;
  }

  .hero__actions .btn {
    width: 100%;
    justify-content: center;
  }

  .stage-links {
    margin-top: 24px;
    padding-top: 16px;
  }

  .stage-links__buttons {
    grid-template-columns: repeat(3, 1fr);
    gap: 6px;
  }

  .stage-links__buttons .chip {
    font-size: 0.7rem;
    padding: 6px 4px;
    min-height: 30px;
  }

  .card {
    padding: 16px 14px;
  }

  .section__header h2 {
    font-size: 1.3rem;
  }

  .section__header p {
    font-size: 0.9rem;
  }

  /* Tablas responsive en móvil */
  .table-card {
    padding: 18px 14px;
  }

  .table-card .table-wrapper {
    margin: 0;
    border-radius: 10px;
  }

  .table-wrapper {
    margin: 0;
    border-radius: 0;
  }

  .comparison-table {
    font-size: 0.85rem;
  }

  .comparison-table thead th,
  .comparison-table tbody td {
    padding: 10px 12px;
  }

  /* Elementos visuales en móvil */
  .competencies-diagram {
    padding: 30px 16px;
  }

  .guide-structure,
  .performance-levels {
    padding: 20px 12px;
  }

  .guide-flow__step {
    min-width: 100%;
  }

  .info-box {
    padding: 20px 12px;
  }
}

/* Mejoras de accesibilidad adicionales */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/* Alto contraste para mejor legibilidad */
@media (prefers-contrast: high) {
  .card {
    border-width: 2px;
  }

  .btn {
    border-width: 2px;
  }

  .comparison-table thead th,
  .comparison-table tbody td {
    border-width: 2px;
  }
}

@media (max-width: 720px) {
  .chart-container {
    padding: 20px;
    margin-bottom: 40px;
  }

  .chart-wrapper--autonomy {
    height: 280px;
  }

  .chart-wrapper--radar {
    height: 320px;
  }

  .radar-stage-selector {
    gap: 6px;
  }

  .radar-stage-btn {
    padding: 8px 14px;
    font-size: 0.85rem;
  }

  .bar-chart {
    height: 300px;
    gap: 8px;
  }

  .detailed-timeline {
    grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
    gap: 12px;
  }

  .orbits-diagram {
    max-width: 100%;
    height: 400px;
  }

  .orbit-4 {
    width: 360px;
    height: 360px;
  }

  .orbit-3 {
    width: 280px;
    height: 280px;
  }

  .orbit-2 {
    width: 200px;
    height: 200px;
  }

  .orbit-1 {
    width: 160px;
    height: 160px;
  }

  .methodology-evolution {
    height: 300px;
    gap: 12px;
  }
}

@media (max-width: 480px) {
  .hero__actions {
    flex-direction: column;
    align-items: stretch;
  }

  .btn {
    width: 100%;
    justify-content: center;
  }
}